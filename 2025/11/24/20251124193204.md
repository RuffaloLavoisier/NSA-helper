# Commit: 975893212cf8b3763d30e2064df96dd8e87ec287
## Message: Test fixes
## Diff:
```
diff --git a/Ghidra/Features/Base/src/main/java/ghidra/app/plugin/core/symboltree/SymbolTreeProvider.java b/Ghidra/Features/Base/src/main/java/ghidra/app/plugin/core/symboltree/SymbolTreeProvider.java
index 190091f6b55..d0376311fac 100644
--- a/Ghidra/Features/Base/src/main/java/ghidra/app/plugin/core/symboltree/SymbolTreeProvider.java
+++ b/Ghidra/Features/Base/src/main/java/ghidra/app/plugin/core/symboltree/SymbolTreeProvider.java
@@ -604,13 +604,13 @@ public void selectSymbol(Symbol symbol) {
 	}
 
 	void readConfigState(SaveState saveState) {
-		navigateIncomingAction.setSelected(saveState.getBoolean("NAVIGTE_INCOMING", false));
-		navigateOutgoingAction.setSelected(saveState.getBoolean("NAVIGTE_OUTGOING", true));
+		navigateIncomingAction.setSelected(saveState.getBoolean("NAVIGATE_INCOMING", false));
+		navigateOutgoingAction.setSelected(saveState.getBoolean("NAVIGATE_OUTGOING", true));
 	}
 
 	void writeConfigState(SaveState saveState) {
-		saveState.putBoolean("NAVIGTE_INCOMING", navigateIncomingAction.isSelected());
-		saveState.putBoolean("NAVIGTE_OUTGOING", navigateOutgoingAction.isSelected());
+		saveState.putBoolean("NAVIGATE_INCOMING", navigateIncomingAction.isSelected());
+		saveState.putBoolean("NAVIGATE_OUTGOING", navigateOutgoingAction.isSelected());
 	}
 
 	void dispose() {
diff --git a/Ghidra/Features/Base/src/test.slow/java/ghidra/app/plugin/core/console/ConsolePluginTest.java b/Ghidra/Features/Base/src/test.slow/java/ghidra/app/plugin/core/console/ConsolePluginTest.java
index 04dbf57fc59..a8470228be7 100644
--- a/Ghidra/Features/Base/src/test.slow/java/ghidra/app/plugin/core/console/ConsolePluginTest.java
+++ b/Ghidra/Features/Base/src/test.slow/java/ghidra/app/plugin/core/console/ConsolePluginTest.java
@@ -407,18 +407,25 @@ private void clear() {
 
 	private void next() {
 		pressButtonByText(findDialog, "Next");
-		waitForTasks();
+		waitForNotBusy();
 	}
 
 	private void previous() {
 		pressButtonByText(findDialog, "Previous");
-		waitForTasks();
+		waitForNotBusy();
 	}
 
 	private void findAll(String text) {
 		runSwing(() -> findDialog.setSearchText(text));
 		pressButtonByText(findDialog, "Find All");
-		waitForTasks();
+		waitForNotBusy();
+	}
+
+	private void waitForNotBusy() {
+		TextComponentSearcher searcher = (TextComponentSearcher) findDialog.getSearcher();
+		waitForSwing();
+		waitFor(() -> !searcher.isBusy());
+		waitForSwing();
 	}
 
 	private void assertSearchModelHasNoSearchResults() {
@@ -489,6 +496,7 @@ private void placeCursorInMatch(TestTextMatch match) {
 	private void selectRow(FindDialogResultsProvider resultsProvider, int row) {
 		GTable table = resultsProvider.getTable();
 		runSwing(() -> table.selectRow(row));
+		waitForSwing();
 	}
 
 	private void verfiyHighlightColor(List<TestTextMatch> matches)
@@ -523,7 +531,6 @@ private void verifyDefaultBackgroundColorForAllText(StyledDocument document) thr
 	}
 
 	private List<TestTextMatch> getExpectedMatches() {
-
 		String searchText = findDialog.getSearchText();
 		assertFalse(searchText.isEmpty());
 		return getExpectedMatches(searchText);
@@ -541,7 +548,7 @@ private List<TestTextMatch> getExpectedMatches(String searchText) {
 
 		int index = text.indexOf(searchText);
 		while (index != -1) {
-			results.add(new TestTextMatch(index, index + searchText.length()));
+			results.add(new TestTextMatch(searchText, index, index + searchText.length()));
 			index = text.indexOf(searchText, index + 1);
 		}
 
@@ -559,7 +566,7 @@ private FindDialog showFindDialog() {
 		return waitForDialogComponent(FindDialog.class);
 	}
 
-	private record TestTextMatch(int start, int end) {
+	private record TestTextMatch(String searchText, int start, int end) {
 
 		boolean contains(int caret) {
 			return start <= caret && caret <= end;
@@ -567,7 +574,7 @@ boolean contains(int caret) {
 
 		@Override
 		public String toString() {
-			return "[" + start + ',' + end + ']';
+			return searchText + ": [" + start + ',' + end + ']';
 		}
 	}
 }
diff --git a/Ghidra/Features/Base/src/test.slow/java/ghidra/app/plugin/core/symboltree/SymbolTreePlugin3Test.java b/Ghidra/Features/Base/src/test.slow/java/ghidra/app/plugin/core/symboltree/SymbolTreePlugin3Test.java
index 3733786018f..8eb06534b50 100644
--- a/Ghidra/Features/Base/src/test.slow/java/ghidra/app/plugin/core/symboltree/SymbolTreePlugin3Test.java
+++ b/Ghidra/Features/Base/src/test.slow/java/ghidra/app/plugin/core/symboltree/SymbolTreePlugin3Test.java
@@ -27,6 +27,7 @@
 
 import org.junit.*;
 
+import docking.DefaultActionContext;
 import docking.action.DockingActionIf;
 import docking.action.ToggleDockingAction;
 import docking.widgets.tree.GTree;
@@ -334,15 +335,15 @@ public void testSortClasses() throws Exception {
 
 	@Test
 	public void testSaveState() throws Exception {
-		final ToggleDockingAction navigateIncomingAction =
+		ToggleDockingAction navigateIncomingAction =
 			(ToggleDockingAction) getAction(plugin, NavigateOnIncomingAction.NAME);
 		assertNotNull(navigateIncomingAction);
-		runSwing(() -> navigateIncomingAction.setSelected(true));
+		setToggleActionSelected(navigateIncomingAction, new DefaultActionContext(), true);
 
 		SaveState saveState = new SaveState("Test");
 		plugin.writeConfigState(saveState);
 
-		assertTrue(saveState.getBoolean("GO_TO_TOGGLE_STATE", false));
+		assertTrue(saveState.getBoolean("NAVIGATE_INCOMING", false));
 
 		runSwing(() -> {
 			tool.removePlugins(List.of(plugin));
@@ -357,13 +358,13 @@ public void testSaveState() throws Exception {
 		assertNotNull(plugin);
 		util.setPlugin(plugin);
 
-		ToggleDockingAction goToToggleAction2 =
-			(ToggleDockingAction) getAction(plugin, "Navigation");
-		assertNotNull(goToToggleAction2);
-		assertFalse(goToToggleAction2.isSelected());
+		navigateIncomingAction =
+			(ToggleDockingAction) getAction(plugin, NavigateOnIncomingAction.NAME);
+		assertNotNull(navigateIncomingAction);
+		assertFalse(navigateIncomingAction.isSelected());
 		plugin.readConfigState(saveState);
 
-		assertTrue(goToToggleAction2.isSelected());
+		assertTrue(navigateIncomingAction.isSelected());
 	}
 
 	@Test
diff --git a/Ghidra/Features/Decompiler/src/main/java/ghidra/app/decompiler/component/DecompilerPanel.java b/Ghidra/Features/Decompiler/src/main/java/ghidra/app/decompiler/component/DecompilerPanel.java
index 0f5011f2dc1..bb9c5eb7299 100644
--- a/Ghidra/Features/Decompiler/src/main/java/ghidra/app/decompiler/component/DecompilerPanel.java
+++ b/Ghidra/Features/Decompiler/src/main/java/ghidra/app/decompiler/component/DecompilerPanel.java
@@ -1405,7 +1405,7 @@ public Highlight[] createHighlights(Field field, String text, int cursorTextOffs
 			Map<Integer, List<DecompilerSearchLocation>> locationsByLine =
 				currentSearchResults.getLocationsByLine();
 			List<DecompilerSearchLocation> locationsOnLine = locationsByLine.get(lineNumber);
-			if (locationsOnLine.isEmpty()) {
+			if (locationsOnLine == null) {
 				return new Highlight[0];
 			}
 
diff --git a/Ghidra/Features/Decompiler/src/test.slow/java/ghidra/app/plugin/core/decompile/AbstractDecompilerTest.java b/Ghidra/Features/Decompiler/src/test.slow/java/ghidra/app/plugin/core/decompile/AbstractDecompilerTest.java
index 33550e27248..61d6cd920ec 100644
--- a/Ghidra/Features/Decompiler/src/test.slow/java/ghidra/app/plugin/core/decompile/AbstractDecompilerTest.java
+++ b/Ghidra/Features/Decompiler/src/test.slow/java/ghidra/app/plugin/core/decompile/AbstractDecompilerTest.java
@@ -152,6 +152,11 @@ protected DecompilerPanel getDecompilerPanel() {
 	 * @return the token under the cursor
 	 */
 	protected ClangToken getToken() {
+		waitForDecompiler();
+		return getToken(provider);
+	}
+
+	protected ClangToken getCursorToken() {
 		return getToken(provider);
 	}
 
diff --git a/Ghidra/Features/Decompiler/src/test.slow/java/ghidra/app/plugin/core/decompile/DecompilerFindDialogTest.java b/Ghidra/Features/Decompiler/src/test.slow/java/ghidra/app/plugin/core/decompile/DecompilerFindDialogTest.java
index 8ec79f64d49..5c87206a446 100644
--- a/Ghidra/Features/Decompiler/src/test.slow/java/ghidra/app/plugin/core/decompile/DecompilerFindDialogTest.java
+++ b/Ghidra/Features/Decompiler/src/test.slow/java/ghidra/app/plugin/core/decompile/DecompilerFindDialogTest.java
@@ -23,18 +23,19 @@
 import org.junit.Test;
 
 import docking.action.DockingActionIf;
+import docking.widgets.FindDialogResultsProvider;
+import docking.widgets.SearchLocation;
 import docking.widgets.dialogs.InputDialog;
 import docking.widgets.fieldpanel.support.FieldLocation;
 import docking.widgets.table.GTable;
+import docking.widgets.table.RowObjectFilterModel;
 import ghidra.app.decompiler.ClangToken;
 import ghidra.app.decompiler.component.DecompilerFindDialog;
 import ghidra.app.decompiler.component.DecompilerPanel;
 import ghidra.app.plugin.core.decompile.actions.DecompilerSearchLocation;
-import ghidra.app.plugin.core.table.TableComponentProvider;
 import ghidra.program.model.listing.Program;
 import ghidra.test.ClassicSampleX86ProgramBuilder;
-import ghidra.util.table.GhidraProgramTableModel;
-import ghidra.util.table.GhidraThreadedTablePanel;
+import util.CollectionUtils;
 
 public class DecompilerFindDialogTest extends AbstractDecompilerTest {
 
@@ -306,20 +307,16 @@ private void clickAndVerify(int row, GTable table, List<DecompilerSearchLocation
 	}
 
 	private GTable getResultsTable() {
-		@SuppressWarnings("unchecked")
-		TableComponentProvider<DecompilerSearchLocation> tableProvider =
-			waitForComponentProvider(TableComponentProvider.class);
-		GhidraThreadedTablePanel<DecompilerSearchLocation> panel =
-			tableProvider.getThreadedTablePanel();
-		return panel.getTable();
+		FindDialogResultsProvider tableProvider =
+			waitForComponentProvider(FindDialogResultsProvider.class);
+		return tableProvider.getTable();
 	}
 
+	@SuppressWarnings("unchecked")
 	private List<DecompilerSearchLocation> getResults(GTable table) {
-		@SuppressWarnings("unchecked")
-		GhidraProgramTableModel<DecompilerSearchLocation> model =
-			(GhidraProgramTableModel<DecompilerSearchLocation>) table.getModel();
-		waitForTableModel(model);
-		return model.getModelData();
+		RowObjectFilterModel<SearchLocation> model =
+			(RowObjectFilterModel<SearchLocation>) table.getModel();
+		return CollectionUtils.asList(model.getModelData(), DecompilerSearchLocation.class);
 	}
 
 	private void next() {
@@ -331,7 +328,7 @@ private void previous() {
 	}
 
 	private void searchAll() {
-		pressButtonByText(findDialog, "Search All");
+		pressButtonByText(findDialog, "Find All");
 	}
 
 	private void assertSearchHit(int line, int column, int length) {
diff --git a/Ghidra/Framework/Docking/src/main/java/docking/widgets/search/TextComponentSearcher.java b/Ghidra/Framework/Docking/src/main/java/docking/widgets/search/TextComponentSearcher.java
index 3fe9efbe03c..d7c4ea16336 100644
--- a/Ghidra/Framework/Docking/src/main/java/docking/widgets/search/TextComponentSearcher.java
+++ b/Ghidra/Framework/Docking/src/main/java/docking/widgets/search/TextComponentSearcher.java
@@ -74,6 +74,10 @@ void setMaxContextChars(int max) {
 		this.maxContextChars = max;
 	}
 
+	public boolean isBusy() {
+		return worker.isBusy();
+	}
+
 	@Override
 	public void dispose() {
 
diff --git a/Ghidra/Framework/Docking/src/test.slow/java/docking/widgets/search/TextComponentSearcherTest.java b/Ghidra/Framework/Docking/src/test.slow/java/docking/widgets/search/TextComponentSearcherTest.java
index 80648ad5a65..ce7ed5050e9 100644
--- a/Ghidra/Framework/Docking/src/test.slow/java/docking/widgets/search/TextComponentSearcherTest.java
+++ b/Ghidra/Framework/Docking/src/test.slow/java/docking/widgets/search/TextComponentSearcherTest.java
@@ -197,7 +197,7 @@ public void testSearchAll_ManySearches_Disposal() throws Exception {
 		results.activate();
 		assertActive(results);
 
-		results.dispose();
+		runSwing(() -> results.dispose());
 		assertInactive(results);
 
 		// make sure active() does not work once disposed
```
-----------------------------------
