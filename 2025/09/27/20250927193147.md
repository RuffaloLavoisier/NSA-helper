# Commit: 9a20684330e1dfabf4aebcfdaeab1f538917149d
## Message: GP-5526 Simplified fix for CreateThunkFunctionCmd
## Diff:
```
diff --git a/Ghidra/Features/Base/src/main/java/ghidra/app/cmd/function/CreateThunkFunctionCmd.java b/Ghidra/Features/Base/src/main/java/ghidra/app/cmd/function/CreateThunkFunctionCmd.java
index 52278eb741c..5d5c5f7d76b 100644
--- a/Ghidra/Features/Base/src/main/java/ghidra/app/cmd/function/CreateThunkFunctionCmd.java
+++ b/Ghidra/Features/Base/src/main/java/ghidra/app/cmd/function/CreateThunkFunctionCmd.java
@@ -567,8 +567,8 @@ public static Address getThunkedAddr(Program program, Address entry,
 		// if there is no pcode, go to the next instruction
 		// assume fallthrough (ie. x86 instruction ENDBR64)
 		// TODO: at some point, might need to do a NOP detection
-		while (instr != null && instr.getPcode().length == 0) {
-			instr = listing.getInstructionAfter(instr.getAddress());
+		if (instr != null && instr.getPcode().length == 0) {
+			instr = listing.getInstructionAfter(entry);
 		}
 		if (instr == null) {
 			return null;
```
-----------------------------------
