# Commit: 2a1df77713881f0a86c865aaf20b5b147ec6760a
## Message: GP-5938 fix NPE when extracting bz2
## Diff:
```
diff --git a/Ghidra/Features/FileFormats/src/main/java/ghidra/file/formats/sevenzip/SevenZipFileSystem.java b/Ghidra/Features/FileFormats/src/main/java/ghidra/file/formats/sevenzip/SevenZipFileSystem.java
index ccb73044a20..7390ed00809 100644
--- a/Ghidra/Features/FileFormats/src/main/java/ghidra/file/formats/sevenzip/SevenZipFileSystem.java
+++ b/Ghidra/Features/FileFormats/src/main/java/ghidra/file/formats/sevenzip/SevenZipFileSystem.java
@@ -401,8 +401,9 @@ public void prepareOperation(ExtractAskMode extractAskMode) throws SevenZipExcep
 			// In our case, we only handle extract operations.
 			if (!currentItem.isFolder() && extractAskMode == ExtractAskMode.EXTRACT) {
 				try {
-					currentCacheEntryBuilder = fsService.createTempFile(currentItem.getSize());
-					monitor.initialize(currentItem.getSize(), "Extracting " + currentName);
+					long size = Objects.requireNonNullElse(currentItem.getSize(), -1L);
+					currentCacheEntryBuilder = fsService.createTempFile(size);
+					monitor.initialize(size, "Extracting " + currentName);
 				}
 				catch (IOException e) {
 					throw new SevenZipException(e);
```
-----------------------------------
