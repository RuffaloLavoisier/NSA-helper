# Commit: aef70ea9becc4a4c752fd685454e8d52afd89707
## Message: GP-6022: Better error reporting when expanding environment variables in
launch.properties
## Diff:
```
diff --git a/GhidraBuild/LaunchSupport/src/main/java/ghidra/launch/LaunchProperties.java b/GhidraBuild/LaunchSupport/src/main/java/ghidra/launch/LaunchProperties.java
index 92fb71359d7..c3822b9d9e5 100644
--- a/GhidraBuild/LaunchSupport/src/main/java/ghidra/launch/LaunchProperties.java
+++ b/GhidraBuild/LaunchSupport/src/main/java/ghidra/launch/LaunchProperties.java
@@ -182,14 +182,23 @@ private static Map<String, List<String>> parseLaunchProperties(File launchProper
 	 * 
 	 * @param text The string to expand environment variables in
 	 * @return The given string, but with set environment variables expanded
+	 * @throws ParseException if there was a problem expanding an environment variable
 	 */
-	private static String expandEnvVars(String text) {  
+	private static String expandEnvVars(String text) throws ParseException {
 		Map<String, String> envMap = System.getenv();
-        for (Entry<String, String> entry : envMap.entrySet()) {
-            String key = entry.getKey();
-            String value = entry.getValue();
-			text = text.replaceAll("\\$\\{" + key + "\\}", value.replace("\\", "\\\\"));
-        }
-        return text;
-    }
+		for (Entry<String, String> entry : envMap.entrySet()) {
+			String key = entry.getKey();
+			String value = entry.getValue();
+			try {
+				text = text.replaceAll("\\$\\{" + key + "\\}", value.replace("\\", "\\\\"));
+			}
+			catch (IllegalArgumentException e) {
+				throw new ParseException(
+					"Error expanding environment variable in %s (env %s=%s) -- %s".formatted(text,
+						key, value, e.getMessage()),
+					0);
+			}
+		}
+		return text;
+	}
 }
```
-----------------------------------
