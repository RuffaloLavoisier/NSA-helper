# Commit: 1a62a7f17c52c5e2674e404b1fbb450cff15d08d
## Message: Updated TestEnv to reset the theme so that font and color changes do not
persist between test runs
## Diff:
```
diff --git a/Ghidra/Features/Base/src/main/java/ghidra/test/TestEnv.java b/Ghidra/Features/Base/src/main/java/ghidra/test/TestEnv.java
index d48848b2281..b757e3fef6a 100644
--- a/Ghidra/Features/Base/src/main/java/ghidra/test/TestEnv.java
+++ b/Ghidra/Features/Base/src/main/java/ghidra/test/TestEnv.java
@@ -31,6 +31,7 @@
 import docking.tool.ToolConstants;
 import generic.jar.ResourceFile;
 import generic.test.*;
+import generic.theme.ThemeManager;
 import ghidra.app.events.CloseProgramPluginEvent;
 import ghidra.app.events.OpenProgramPluginEvent;
 import ghidra.app.plugin.core.analysis.AutoAnalysisManager;
@@ -253,6 +254,7 @@ protected void disposeFrontEndTool() {
 	private void dipsoseTestTools() {
 		AbstractGuiTest.runSwing(() -> {
 			disposeSingleTool(tool);
+			tool = null;
 
 			for (PluginTool pt : extraTools) {
 				disposeSingleTool(pt);
@@ -438,6 +440,7 @@ private void initializeSimpleTool() {
 	}
 
 	private PluginTool lazyTool() {
+
 		if (tool != null) {
 			return tool;
 		}
@@ -1095,6 +1098,13 @@ public void dispose() {
 		disposeAllSwingUpdateManagers();
 
 		deleteTestProject(projectName);
+
+		resetTheme();
+	}
+
+	private void resetTheme() {
+		ThemeManager themeManager = ThemeManager.getInstance();
+		themeManager.restoreThemeValues();
 	}
 
 	private void deleteTestProject(String projectName) {
```
-----------------------------------
