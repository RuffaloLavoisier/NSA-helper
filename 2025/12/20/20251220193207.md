# Commit: f4491209ae2aff2422671c530291e8994d587a10
## Message: API rate limit exceeded for 20.109.95.162. (But here's the good news: Authenticated requests get a higher rate limit. Check out the documentation for more details.)
## Diff:
```
diff --git a/Ghidra/Framework/SoftwareModeling/src/main/java/ghidra/program/database/references/ReferenceDBManager.java b/Ghidra/Framework/SoftwareModeling/src/main/java/ghidra/program/database/references/ReferenceDBManager.java
index a0057e02318..8815b1684e3 100644
--- a/Ghidra/Framework/SoftwareModeling/src/main/java/ghidra/program/database/references/ReferenceDBManager.java
+++ b/Ghidra/Framework/SoftwareModeling/src/main/java/ghidra/program/database/references/ReferenceDBManager.java
@@ -851,7 +851,7 @@ public Reference[] getReferencesFrom(Address addr) {
 	@Override
 	public Reference[] getFlowReferencesFrom(Address addr) {
 		Reference[] refs = getReferencesFrom(addr);
-		ArrayList<Reference> list = new ArrayList<>(refs.length);
+		List<Reference> list = new ArrayList<>(refs.length);
 		for (Reference ref : refs) {
 			if (ref.getReferenceType().isFlow()) {
 				list.add(ref);
@@ -932,7 +932,7 @@ Reference[] getReferences(Address fromAddr, int opIndex) {
 			if (fromRefs == null) {
 				return NO_REFS;
 			}
-			ArrayList<Reference> list = new ArrayList<>(10);
+			List<Reference> list = new ArrayList<>(10);
 			ReferenceIterator it = fromRefs.getRefs();
 			while (it.hasNext()) {
 				Reference ref = it.next();
@@ -1216,7 +1216,7 @@ public void symbolRemoved(Symbol symbol) {
 		Address refAddr = symbol.getAddress();
 
 		ReferenceIterator iter = getReferencesTo(refAddr);
-		ArrayList<Reference> list = new ArrayList<>();
+		List<Reference> list = new ArrayList<>();
 		while (iter.hasNext()) {
 			Reference ref = iter.next();
 			if (symID == ref.getSymbolID()) {
@@ -2028,15 +2028,13 @@ synchronized void setFunction(Function function) {
 		synchronized void clearCache() {
 			cachedFunction = null;
 			references = null;
+			variablesByAddress = null;
 		}
 
 		synchronized SortedMap<Address, List<Reference>> getFunctionDataReferences() {
-
-			if (references != null) {
-				return references;
+			if (references == null) {
+				references = getSortedVariableReferences(cachedFunction);
 			}
-
-			references = getSortedVariableReferences(cachedFunction);
 			return references;
 		}
 
@@ -2050,9 +2048,6 @@ synchronized List<Variable> getVariables(Address address) {
 				LazyMap.lazyMap(new HashMap<>(), () -> new ArrayList<>());
 
 			for (Symbol s : symbolMgr.getSymbols(cachedFunction.getID())) {
-				if (!s.getAddress().equals(address)) {
-					continue;
-				}
 				Variable v = (Variable) s.getObject();
 				map.get(address).add(v);
 			}
@@ -2068,8 +2063,8 @@ private SortedMap<Address, List<Reference>> getSortedVariableReferences(Function
 			ReferenceIterator refIter = new FromRefIterator(function.getBody());
 			while (refIter.hasNext()) {
 				Reference ref = refIter.next();
-				RefType referenceType = ref.getReferenceType();
-				if (referenceType.isFlow() && !referenceType.isIndirect()) {
+				RefType type = ref.getReferenceType();
+				if (type.isFlow() && !type.isIndirect()) {
 					continue;
 				}
 
```
-----------------------------------
