# Commit: 11f139264bab97093fe7b9483e30d0016a648b86
## Message: GP-0: for lldb tests
## Diff:
```
diff --git a/Ghidra/Framework/Pty/src/main/java/ghidra/pty/windows/AnsiBufferedInputStream.java b/Ghidra/Framework/Pty/src/main/java/ghidra/pty/windows/AnsiBufferedInputStream.java
index 4c573815b91..4b78da12058 100644
--- a/Ghidra/Framework/Pty/src/main/java/ghidra/pty/windows/AnsiBufferedInputStream.java
+++ b/Ghidra/Framework/Pty/src/main/java/ghidra/pty/windows/AnsiBufferedInputStream.java
@@ -4,9 +4,9 @@
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
- * 
+ *
  *      http://www.apache.org/licenses/LICENSE-2.0
- * 
+ *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
@@ -118,7 +118,7 @@ protected int processNext() throws IOException {
 			return -1;
 		}
 		byte c = (byte) ci;
-		// printDebugChar(c);
+		//printDebugChar(c);
 		switch (mode) {
 			case CHARS:
 				processChars(c);
@@ -250,6 +250,10 @@ protected void processCsiParamOrCommand(byte c) {
 				execCursorBackward();
 				mode = Mode.CHARS;
 				break;
+			case 'G':
+				execCursorCharAbsolute();
+				mode = Mode.CHARS;
+				break;
 			case 'H':
 				execCursorPosition();
 				mode = Mode.CHARS;
@@ -415,6 +419,11 @@ protected void execCursorBackward() {
 		lineBuf.position(lineBuf.position() - delta);
 	}
 
+	protected void execCursorCharAbsolute() {
+		int abs = parseNumericBuffer();
+		lineBuf.position(abs - 1);
+	}
+
 	protected void execCursorPosition() {
 		int[] yx = parseNumericListBuffer();
 		if (yx.length == 0) {
diff --git a/Ghidra/Test/DebuggerIntegrationTest/src/test.slow/java/agent/lldb/rmi/AbstractLldbTraceRmiTest.java b/Ghidra/Test/DebuggerIntegrationTest/src/test.slow/java/agent/lldb/rmi/AbstractLldbTraceRmiTest.java
index e65622fd01b..8e57585d3b1 100644
--- a/Ghidra/Test/DebuggerIntegrationTest/src/test.slow/java/agent/lldb/rmi/AbstractLldbTraceRmiTest.java
+++ b/Ghidra/Test/DebuggerIntegrationTest/src/test.slow/java/agent/lldb/rmi/AbstractLldbTraceRmiTest.java
@@ -32,8 +32,7 @@
 import org.apache.commons.io.output.TeeOutputStream;
 import org.apache.commons.lang3.exception.ExceptionUtils;
 import org.hamcrest.Matchers;
-import org.junit.Before;
-import org.junit.BeforeClass;
+import org.junit.*;
 
 import ghidra.app.plugin.core.debug.gui.AbstractGhidraHeadedDebuggerTest;
 import ghidra.app.plugin.core.debug.service.tracermi.TraceRmiPlugin;
@@ -50,6 +49,7 @@
 import ghidra.program.model.address.AddressRangeImpl;
 import ghidra.pty.*;
 import ghidra.pty.testutil.DummyProc;
+import ghidra.pty.windows.AnsiBufferedInputStream;
 import ghidra.trace.model.Lifespan;
 import ghidra.trace.model.breakpoint.TraceBreakpointKind;
 import ghidra.trace.model.breakpoint.TraceBreakpointKind.TraceBreakpointKindSet;
@@ -59,12 +59,16 @@
 
 public abstract class AbstractLldbTraceRmiTest extends AbstractGhidraHeadedDebuggerTest {
 
+	public static final boolean IS_WINDOWS =
+		OperatingSystem.CURRENT_OPERATING_SYSTEM == OperatingSystem.WINDOWS;
+
 	record PlatDep(String name, String endian, String lang, String cSpec, String callMne,
 			String intReg, String floatReg) {
 		static final PlatDep ARM64 =
 			new PlatDep("arm64", "little", "AARCH64:LE:64:v8A", "default", "bl", "x0", "s0");
 		static final PlatDep X8664 = // Note AT&T callq
-			new PlatDep("x86_64", "little", "x86:LE:64:default", "gcc", "callq", "rax", "st0");
+			new PlatDep("x86_64", "little", "x86:LE:64:default", IS_WINDOWS ? "windows" : "gcc",
+				"callq", "rax", "st0");
 	}
 
 	public static final PlatDep PLAT = computePlat();
@@ -81,16 +85,27 @@ static PlatDep computePlat() {
 		};
 	}
 
-	static String getSpecimenClone() {
-		return DummyProc.which("expCloneExit");
+	static String getSpecimenNewThreadAndExit() {
+		return IS_WINDOWS ? which("expCreateThreadExit") : which("expCloneExit");
+	}
+
+	static int getSleepThreadCount() {
+		// The targets above use different sleep methods:
+		//   Linux spawns clock_nanosleep
+		//   Windows spawns ZwDelayExecution and multiple ZwWaitForWork threads
+		return IS_WINDOWS ? 3 : 1;
 	}
 
 	static String getSpecimenPrint() {
-		return DummyProc.which("expPrint");
+		return which("expPrint");
+	}
+
+	static String getSpecimenSpin() {
+		return which("expSpin");
 	}
 
 	static String getSpecimenRead() {
-		return DummyProc.which("expRead");
+		return which("expRead");
 	}
 
 	/**
@@ -106,7 +121,7 @@ static String getSpecimenRead() {
 			""";
 	// Connecting should be the first thing the script does, so use a tight timeout.
 	protected static final int CONNECT_TIMEOUT_MS = 3000;
-	protected static final int TIMEOUT_SECONDS = 300;
+	protected static final int TIMEOUT_SECONDS = SystemUtilities.isInTestingBatchMode() ? 10 : 30;
 	protected static final int QUIT_TIMEOUT_MS = 1000;
 
 	/** Some snapshot likely to exceed the latest */
@@ -125,7 +140,11 @@ public static void setupPython() throws Throwable {
 			// Don't run gradle in gradle. It already did this task.
 			return;
 		}
-		new ProcessBuilder("gradle", "assemblePyPackage")
+		String gradleCmd =
+			OperatingSystem.CURRENT_OPERATING_SYSTEM == OperatingSystem.WINDOWS ? "gradle.bat"
+					: "gradle";
+		String gradle = DummyProc.which(gradleCmd);
+		new ProcessBuilder(gradle, "assemblePyPackage")
 				.directory(TestApplicationUtils.getInstallationDirectory())
 				.inheritIO()
 				.start()
@@ -156,6 +175,13 @@ public void setupTraceRmi() throws Throwable {
 		}
 	}
 
+	@After
+	public void tearDownTraceRmi() throws IOException {
+		for (TraceRmiConnection cx : traceRmi.getAllConnections()) {
+			cx.close();
+		}
+	}
+
 	protected void addAllDebuggerPlugins() throws PluginException {
 		PluginsConfiguration plugConf = new PluginsConfiguration() {
 			@Override
@@ -198,6 +224,7 @@ protected record ExecInLldb(Pty pty, PtySession lldb, CompletableFuture<LldbResu
 
 	@SuppressWarnings("resource") // Do not close stdin 
 	protected ExecInLldb execInLldb(String script) throws IOException {
+		script = lfIfWindows(script);
 		Pty pty = PtyFactory.local().openpty();
 		Map<String, String> env = new HashMap<>(System.getenv());
 		setPythonPath(env);
@@ -210,8 +237,12 @@ protected ExecInLldb execInLldb(String script) throws IOException {
 		else {
 			out = new TeeOutputStream(System.out, capture);
 		}
-		Thread pumper = new StreamPumper(pty.getParent().getInputStream(), out);
+		InputStream inputStream = pty.getParent().getInputStream();
+		inputStream = new AnsiBufferedInputStream(inputStream);
+		Thread pumper = new StreamPumper(inputStream, out);
 		pumper.start();
+		// NB: you have to do this because the AnsiBufferedInputStream requires a single line
+		pty.getChild().setWindowSize((short) 400, (short) 1);
 		PtySession lldbSession = pty.getChild().session(new String[] { lldbPath.toString() }, env);
 
 		OutputStream stdin = pty.getParent().getOutputStream();
@@ -281,21 +312,25 @@ protected RemoteMethod getMethod(String name) {
 		}
 
 		public void execute(String cmd) {
+			cmd = lfIfWindows(cmd);
 			RemoteMethod execute = getMethod("execute");
 			execute.invoke(Map.of("cmd", cmd));
 		}
 
 		public RemoteAsyncResult executeAsync(String cmd) {
+			cmd = lfIfWindows(cmd);
 			RemoteMethod execute = getMethod("execute");
 			return execute.invokeAsync(Map.of("cmd", cmd));
 		}
 
 		public String executeCapture(String cmd) {
+			cmd = lfIfWindows(cmd);
 			RemoteMethod execute = getMethod("execute");
 			return (String) execute.invoke(Map.of("cmd", cmd, "to_string", true));
 		}
 
 		public Object evaluate(String expr) {
+			expr = lfIfWindows(expr);
 			RemoteMethod evaluate = getMethod("evaluate");
 			return evaluate.invoke(Map.of("expr", expr));
 		}
@@ -313,13 +348,22 @@ public void success() {
 		public void close() throws Exception {
 			Msg.info(this, "Cleaning up lldb");
 			execute("settings set auto-confirm true");
-			exec.pty.getParent().getOutputStream().write("""
+			String cmd = """
 					quit
-					""".getBytes());
+					""";
+			cmd = lfIfWindows(cmd);
+			exec.pty.getParent().getOutputStream().write(cmd.getBytes());
+			Exception finalExc = null;
 			try {
-				LldbResult r = exec.future.get(TIMEOUT_SECONDS, TimeUnit.SECONDS);
-				r.handle();
-				waitForPass(() -> assertTrue(connection.isClosed()));
+				try {
+					LldbResult r = exec.future.get(TIMEOUT_SECONDS, TimeUnit.SECONDS);
+					r.handle();
+				}
+				catch (Exception e) {
+					finalExc = e;
+				}
+				waitForPass(this, () -> assertTrue(connection.isClosed()), TIMEOUT_SECONDS,
+					TimeUnit.SECONDS);
 			}
 			finally {
 				if (!success) {
@@ -329,6 +373,9 @@ public void close() throws Exception {
 				exec.pty.close();
 				exec.lldb.destroyForcibly();
 				exec.pumper.interrupt();
+				if (finalExc != null) {
+					throw finalExc;
+				}
 			}
 		}
 	}
@@ -468,6 +515,7 @@ protected ManagedDomainObject waitDomainObject(String path) throws Exception {
 	protected void assertLocalOs(String actual) {
 		assertThat(actual, Matchers.startsWith(switch (OperatingSystem.CURRENT_OPERATING_SYSTEM) {
 			case LINUX -> "linux";
+			case WINDOWS -> "windows";
 			case MAC_OS_X -> "macos";
 			default -> throw new AssertionError("What OS?");
 		}));
@@ -611,4 +659,20 @@ public static void waitForPass(Runnable runnable, long timeoutMs, long retryDela
 		}
 		throw lastError;
 	}
+
+	public static String which(String cmd) {
+		return DummyProc.which(cmd).replace('\\', '/');
+	}
+
+	public static String projectName(String cmd) {
+		String ext = IS_WINDOWS ? ".exe" : "";
+		return "/New Traces/lldb/" + cmd + ext;
+	}
+
+	private String lfIfWindows(String cmd) {
+		if (IS_WINDOWS) {
+			cmd = cmd.replace("\n", "\r\n");
+		}
+		return cmd;
+	}
 }
diff --git a/Ghidra/Test/DebuggerIntegrationTest/src/test.slow/java/agent/lldb/rmi/LldbCommandsTest.java b/Ghidra/Test/DebuggerIntegrationTest/src/test.slow/java/agent/lldb/rmi/LldbCommandsTest.java
index bf98e13af32..0b0ff522c73 100644
--- a/Ghidra/Test/DebuggerIntegrationTest/src/test.slow/java/agent/lldb/rmi/LldbCommandsTest.java
+++ b/Ghidra/Test/DebuggerIntegrationTest/src/test.slow/java/agent/lldb/rmi/LldbCommandsTest.java
@@ -17,6 +17,7 @@
 
 import static org.hamcrest.Matchers.*;
 import static org.junit.Assert.*;
+import static org.junit.Assume.*;
 
 import java.nio.ByteBuffer;
 import java.util.*;
@@ -111,7 +112,7 @@ public void testStartTraceDefaults() throws Exception {
 				ghidra trace start
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			assertEquals(PLAT.lang(),
 				tb.trace.getBaseLanguage().getLanguageID().getIdAsString());
@@ -168,7 +169,7 @@ public void testStopTrace() throws Exception {
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
 		// NOTE: Given the 'quit' command, I'm not sure this assertion is checking anything.
-		waitDomainObjectClosed("/New Traces/lldb/expPrint");
+		waitDomainObjectClosed(projectName("expPrint"));
 	}
 
 	@Test
@@ -177,8 +178,8 @@ public void testInfo() throws Exception {
 		String out = runThrowError(addr -> {
 			refAddr.set(addr);
 			return """
-					file %s
 					%s
+					file %s
 					script print("---Import---")
 					ghidra trace info
 					ghidra trace connect %s
@@ -194,7 +195,7 @@ script print("---Stop---")
 					script print("---Disconnect---")
 					ghidra trace info
 					quit
-					""".formatted(getSpecimenPrint(), PREAMBLE, addr);
+					""".formatted(PREAMBLE, getSpecimenPrint(), addr);
 		});
 
 		assertEquals("""
@@ -221,10 +222,11 @@ script print("---Disconnect---")
 	public void testLcsp() throws Exception {
 		String out = runThrowError(
 			"""
+					%s
 					script import ghidralldb
 					script print("---Import---")
 					ghidra trace info-lcsp
-					script print("---
+					script print("---")
 					file %s
 					script print("---File---")
 					ghidra trace info-lcsp
@@ -236,7 +238,7 @@ script print("---Compiler---")
 					ghidra trace info-lcsp
 					quit
 					"""
-					.formatted(getSpecimenPrint()));
+					.formatted(PREAMBLE, getSpecimenPrint()));
 
 		assertEquals("""
 				Selected Ghidra language: %s
@@ -253,8 +255,10 @@ script print("---Compiler---")
 			extractOutSection(out, "---Compiler---"));
 	}
 
+	// TODO: Fails for Windows because the Project cannot be closed
 	@Test
 	public void testSave() throws Exception {
+		assumeFalse(IS_WINDOWS);
 		traceManager.setSaveTracesByDefault(false);
 
 		// For sanity check, verify failing to save drops data
@@ -304,7 +308,7 @@ public void testSnapshot() throws Exception {
 				ghidra trace tx-commit
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			TraceSnapshot snapshot = Unique.assertOne(tb.trace.getTimeManager().getAllSnapshots());
 			assertEquals(0, snapshot.getKey());
@@ -330,7 +334,7 @@ script print("---")
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			long snap = Unique.assertOne(tb.trace.getTimeManager().getAllSnapshots()).getKey();
 
@@ -363,7 +367,7 @@ script print("---")
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			long snap = Unique.assertOne(tb.trace.getTimeManager().getAllSnapshots()).getKey();
 
@@ -400,7 +404,7 @@ script print("---")
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			long snap = Unique.assertOne(tb.trace.getTimeManager().getAllSnapshots()).getKey();
 
@@ -431,7 +435,7 @@ public void testPutreg() throws Exception {
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint(), PLAT.intReg(), PLAT.floatReg()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			long snap = Unique.assertOne(tb.trace.getTimeManager().getAllSnapshots()).getKey();
 			List<TraceObjectValue> regVals = tb.trace.getObjectManager()
@@ -491,7 +495,7 @@ public void testDelreg() throws Exception {
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint(), PLAT.intReg(), PLAT.floatReg()));
 		// The spaces will be left over, but the values should be zeroed
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			long snap = Unique.assertOne(tb.trace.getTimeManager().getAllSnapshots()).getKey();
 			List<TraceObjectValue> regVals = tb.trace.getObjectManager()
@@ -593,7 +597,7 @@ public void testRemoveObj() throws Exception {
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			TraceObject object = tb.trace.getObjectManager()
 					.getObjectByCanonicalPath(KeyPath.parse("Test.Objects[1]"));
@@ -621,7 +625,7 @@ protected <T> T runTestSetValue(String extra, String lldbExpr, String gtype)
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint(), extra, lldbExpr, gtype));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			TraceObject object = tb.trace.getObjectManager()
 					.getObjectByCanonicalPath(KeyPath.parse("Test.Objects[1]"));
@@ -811,7 +815,7 @@ public void testRetainValues() throws Exception {
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			TraceObject object = tb.trace.getObjectManager()
 					.getObjectByCanonicalPath(KeyPath.parse("Test.Objects[1]"));
@@ -848,12 +852,15 @@ script print("---")
 					.getObjectByCanonicalPath(KeyPath.parse("Test.Objects[1]"));
 			assertNotNull(object);
 			String getObject = extractOutSection(out, "---GetObject---");
-			assertEquals("%d\tTest.Objects[1]".formatted(object.getKey()), getObject);
+			assertTrue(getObject.contains("%d".formatted(object.getKey())));
+			assertTrue(getObject.contains("Test.Objects[1]"));
 		}
 	}
 
 	@Test
 	public void testGetValues() throws Exception {
+		// NB: For reasons no one currently understands, using 0xdeadbeef below 
+		//   causes the process output to short-circuit and the test to fail.
 		String out = runThrowError(addr -> """
 				%s
 				ghidra trace connect %s
@@ -869,7 +876,7 @@ public void testGetValues() throws Exception {
 				ghidra trace set-value Test.Objects[1] vshort (short)2
 				ghidra trace set-value Test.Objects[1] vint 3
 				ghidra trace set-value Test.Objects[1] vlong 4LL
-				ghidra trace set-value Test.Objects[1] vaddr (void*)0xdeadbeef
+				ghidra trace set-value Test.Objects[1] vaddr (void*)0xdead
 				ghidra trace set-value Test.Objects[1] vobj Test.Objects[1] OBJECT
 				ghidra trace tx-commit
 				script print("---GetValues---")
@@ -878,12 +885,12 @@ script print("---")
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			assertEquals(
 				"""
 						Parent          Key    Span     Value           Type
-						Test.Objects[1] vaddr  [0,+inf) ram:deadbeef    ADDRESS
+						Test.Objects[1] vaddr  [0,+inf) ram:0000dead    ADDRESS
 						Test.Objects[1] vbool  [0,+inf) True            BOOL
 						Test.Objects[1] vbyte  [0,+inf) 1               BYTE
 						Test.Objects[1] vchar  [0,+inf) 'A'             CHAR
@@ -898,6 +905,8 @@ script print("---")
 
 	@Test
 	public void testGetValuesRng() throws Exception {
+		// NB: For reasons no one currently understands, using 0xdeadbeef below causes
+		//    the process output to short-circuit and the test to fail, as above.
 		String out = runThrowError(addr -> """
 				%s
 				ghidra trace connect %s
@@ -907,19 +916,19 @@ public void testGetValuesRng() throws Exception {
 				ghidra trace tx-start "Create Object"
 				ghidra trace create-obj Test.Objects[1]
 				ghidra trace insert-obj Test.Objects[1]
-				ghidra trace set-value Test.Objects[1] vaddr (void*)0xdeadbeef
+				ghidra trace set-value Test.Objects[1] vaddr (void*)0xdead
 				ghidra trace tx-commit
 				script print("---GetValues---")
-				ghidra trace get-values-rng (void*)0xdeadbeef 10
+				ghidra trace get-values-rng (void*)0xdead 10
 				script print("---")
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			assertEquals("""
 					Parent          Key   Span     Value        Type
-					Test.Objects[1] vaddr [0,+inf) ram:deadbeef ADDRESS\
+					Test.Objects[1] vaddr [0,+inf) ram:0000dead ADDRESS\
 					""",
 				extractOutSection(out, "---GetValues---"));
 		}
@@ -941,7 +950,7 @@ public void testActivateObject() throws Exception {
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			assertSame(mdo.get(), traceManager.getCurrentTrace());
 			assertEquals("Test.Objects[1]",
 				traceManager.getCurrentObject().getCanonicalPath().toString());
@@ -965,7 +974,7 @@ script print("---")
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			// Not concerned about specifics, so long as disassembly occurs
 			long total = 0;
@@ -1037,7 +1046,7 @@ public void testPutBreakpoints() throws Exception {
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			List<TraceObjectValue> procBreakLocVals = tb.trace.getObjectManager()
 					.getValuePaths(Lifespan.at(0),
@@ -1076,7 +1085,7 @@ public void testPutWatchpoints() throws Exception {
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			List<TraceObjectValue> procWatchLocVals = tb.trace.getObjectManager()
 					.getValuePaths(Lifespan.at(0),
@@ -1118,7 +1127,7 @@ public void testPutEnvironment() throws Exception {
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			// Assumes LLDB on Linux amd64
 			TraceObject env =
@@ -1144,7 +1153,7 @@ public void testPutRegions() throws Exception {
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			// Would be nice to control / validate the specifics
 			Collection<? extends TraceMemoryRegion> all =
@@ -1167,7 +1176,7 @@ public void testPutModules() throws Exception {
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			// Would be nice to control / validate the specifics
 			Collection<? extends TraceModule> all = tb.trace.getModuleManager().getAllModules();
@@ -1191,7 +1200,7 @@ public void testPutThreads() throws Exception {
 				kill
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			// Would be nice to control / validate the specifics
 			Unique.assertOne(tb.trace.getThreadManager().getAllThreads());
@@ -1218,7 +1227,7 @@ public void testPutFrames() throws Exception {
 				quit
 				""".formatted(PREAMBLE, addr, getSpecimenPrint()));
 
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			tb = new ToyDBTraceBuilder((Trace) mdo.get());
 			// Would be nice to control / validate the specifics
 			List<TraceObject> stack = tb.trace.getObjectManager()
@@ -1226,12 +1235,13 @@ public void testPutFrames() throws Exception {
 						PathFilter.parse("Processes[].Threads[].Stack[]"))
 					.map(p -> p.getDestination(null))
 					.toList();
-			assertThat(stack.size(), greaterThan(2));
+			assertThat(stack.size(), IS_WINDOWS ? equalTo(1) : greaterThan(2));
 		}
 	}
 
-	@Test
+	@Test 
 	public void testMinimal() throws Exception {
+		assumeFalse(IS_WINDOWS);
 		Function<String, String> scriptSupplier = addr -> """
 				%s
 				ghidra trace connect %s
diff --git a/Ghidra/Test/DebuggerIntegrationTest/src/test.slow/java/agent/lldb/rmi/LldbHooksTest.java b/Ghidra/Test/DebuggerIntegrationTest/src/test.slow/java/agent/lldb/rmi/LldbHooksTest.java
index dedc31cf13f..b6dba7eaa89 100644
--- a/Ghidra/Test/DebuggerIntegrationTest/src/test.slow/java/agent/lldb/rmi/LldbHooksTest.java
+++ b/Ghidra/Test/DebuggerIntegrationTest/src/test.slow/java/agent/lldb/rmi/LldbHooksTest.java
@@ -16,8 +16,7 @@
 package agent.lldb.rmi;
 
 import static org.hamcrest.MatcherAssert.assertThat;
-import static org.hamcrest.Matchers.greaterThan;
-import static org.hamcrest.Matchers.instanceOf;
+import static org.hamcrest.Matchers.*;
 import static org.junit.Assert.*;
 
 import java.nio.ByteBuffer;
@@ -28,9 +27,9 @@
 import org.junit.experimental.categories.Category;
 
 import generic.test.category.NightlyCategory;
+import generic.test.rule.Repeated;
 import ghidra.app.plugin.core.debug.utils.ManagedDomainObject;
 import ghidra.program.model.address.AddressSpace;
-import ghidra.pty.testutil.DummyProc;
 import ghidra.trace.database.ToyDBTraceBuilder;
 import ghidra.trace.model.Lifespan;
 import ghidra.trace.model.Trace;
@@ -59,8 +58,22 @@ public void success() {
 
 		@Override
 		public void close() throws Exception {
-			conn.close();
-			mdo.close();
+			Exception toThrow = null;
+			try {
+				conn.close();
+			}
+			catch (Exception e) {
+				toThrow = e;
+			}
+			try {
+				mdo.close();
+			}
+			catch (Exception e) {
+				toThrow = e;
+			}
+			if (toThrow != null) {
+				throw toThrow;
+			}
 		}
 	}
 
@@ -86,10 +99,10 @@ protected long lastSnap(LldbAndTrace conn) {
 	// TODO: This passes if you single-step through it but fails on some transactional stuff if run
 	//@Test
 	public void testOnNewThread() throws Exception {
-		String cloneExit = DummyProc.which("expCloneExit");
+		String specimen = getSpecimenNewThreadAndExit();
 		try (LldbAndTrace conn = startAndSyncLldb()) {
 
-			start(conn, "%s".formatted(cloneExit));
+			start(conn, "%s".formatted(specimen));
 			conn.execute("break set -n work");
 			waitForPass(() -> {
 				TraceObject proc = tb.objAny0("Processes[]");
@@ -115,11 +128,11 @@ public void testOnNewThread() throws Exception {
 	// TODO: This passes if you single-step through it but fails on some transactional stuff if run
 	//@Test
 	public void testOnThreadSelected() throws Exception {
-		String cloneExit = DummyProc.which("expCloneExit");
+		String specimen = getSpecimenNewThreadAndExit();
 		try (LldbAndTrace conn = startAndSyncLldb()) {
 			traceManager.openTrace(tb.trace);
 
-			start(conn, "%s".formatted(cloneExit));
+			start(conn, "%s".formatted(specimen));
 			conn.execute("break set -n work");
 
 			waitForPass(() -> {
@@ -211,7 +224,7 @@ public void testOnFrameSelected() throws Exception {
 			traceManager.openTrace(tb.trace);
 
 			start(conn, getSpecimenPrint());
-			conn.execute("breakpoint set -n puts");
+			conn.execute("breakpoint set -n wrapputs");
 			conn.execute("cont");
 
 			waitStopped(conn.conn);
@@ -284,7 +297,7 @@ public void testOnRegisterChanged() throws Exception {
 	@Test
 	public void testOnCont() throws Exception {
 		try (LldbAndTrace conn = startAndSyncLldb()) {
-			start(conn, getSpecimenRead());
+			start(conn, getSpecimenSpin());
 
 			conn.execute("cont");
 			waitRunning(conn.conn);
diff --git a/Ghidra/Test/DebuggerIntegrationTest/src/test.slow/java/agent/lldb/rmi/LldbMethodsTest.java b/Ghidra/Test/DebuggerIntegrationTest/src/test.slow/java/agent/lldb/rmi/LldbMethodsTest.java
index 817b31b60b4..4431a9ccd35 100644
--- a/Ghidra/Test/DebuggerIntegrationTest/src/test.slow/java/agent/lldb/rmi/LldbMethodsTest.java
+++ b/Ghidra/Test/DebuggerIntegrationTest/src/test.slow/java/agent/lldb/rmi/LldbMethodsTest.java
@@ -18,7 +18,7 @@
 import static org.hamcrest.MatcherAssert.assertThat;
 import static org.hamcrest.Matchers.*;
 import static org.junit.Assert.*;
-import static org.junit.Assume.assumeTrue;
+import static org.junit.Assume.*;
 
 import java.util.*;
 
@@ -54,8 +54,9 @@ public void testExecuteCapture() throws Exception {
 		try (LldbAndConnection conn = startAndConnectLldb()) {
 			RemoteMethod execute = conn.getMethod("execute");
 			assertEquals(false, execute.parameters().get("to_string").getDefaultValue());
-			assertEquals("test\n",
-				execute.invoke(Map.of("cmd", "script print('test')", "to_string", true)));
+			String result =
+				(String) execute.invoke(Map.of("cmd", "script print('test')", "to_string", true));
+			assertEquals("test\n", result.replace("\r\n", "\n"));
 			conn.success();
 		}
 	}
@@ -67,7 +68,7 @@ public void testExecute() throws Exception {
 			conn.execute("kill");
 			conn.success();
 		}
-		try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+		try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 			// Just confirm it's present
 		}
 	}
@@ -104,7 +105,7 @@ public void testRefreshProcBreakpoints() throws Exception {
 			txPut(conn, "breakpoints");
 
 			RemoteMethod refreshProcBreakpoints = conn.getMethod("refresh_proc_breakpoints");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 
@@ -143,7 +144,7 @@ public void testRefreshProcWatchpoints() throws Exception {
 			txPut(conn, "all");
 
 			RemoteMethod refreshProcWatchpoints = conn.getMethod("refresh_proc_watchpoints");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 
@@ -219,7 +220,7 @@ public void testRefreshEnvironment() throws Exception {
 			txPut(conn, "all");
 
 			RemoteMethod refreshEnvironment = conn.getMethod("refresh_environment");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				TraceObject env = Objects.requireNonNull(tb.objAny0(path));
 
@@ -242,7 +243,7 @@ public void testRefreshThreads() throws Exception {
 			txCreate(conn, path);
 
 			RemoteMethod refreshThreads = conn.getMethod("refresh_threads");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				TraceObject threads = Objects.requireNonNull(tb.objAny0(path));
 
@@ -262,10 +263,10 @@ public void testRefreshStack() throws Exception {
 			conn.execute("file " + getSpecimenPrint());
 			conn.execute("ghidra trace start");
 			txPut(conn, "processes");
-			breakAt(conn, "puts");
+			breakAt(conn, "wrapputs");
 
 			RemoteMethod refreshStack = conn.getMethod("refresh_stack");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 				waitTxDone();
@@ -296,7 +297,7 @@ public void testRefreshRegisters() throws Exception {
 			conn.execute("ghidra trace tx-commit");
 
 			RemoteMethod refreshRegisters = conn.getMethod("refresh_registers");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 
 				conn.execute("expr $%s = 0xdeadbeef".formatted(PLAT.intReg()));
@@ -324,7 +325,7 @@ public void testRefreshMappings() throws Exception {
 			txCreate(conn, path);
 
 			RemoteMethod refreshMappings = conn.getMethod("refresh_mappings");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				TraceObject memory = Objects.requireNonNull(tb.objAny0(path));
 
@@ -347,7 +348,7 @@ public void testRefreshModules() throws Exception {
 			txCreate(conn, path);
 
 			RemoteMethod refreshModules = conn.getMethod("refresh_modules");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				TraceObject modules = Objects.requireNonNull(tb.objAny0(path));
 
@@ -366,17 +367,18 @@ public void testRefreshModules() throws Exception {
 	@Test
 	public void testActivateThread() throws Exception {
 		// This test crashes lldb-1500.0.404.7 on macOS arm64
-		assumeTrue(OperatingSystem.CURRENT_OPERATING_SYSTEM == OperatingSystem.LINUX);
+		OperatingSystem os = OperatingSystem.CURRENT_OPERATING_SYSTEM;
+		assumeTrue(os == OperatingSystem.LINUX || os == OperatingSystem.WINDOWS);
 		try (LldbAndConnection conn = startAndConnectLldb()) {
 			// TODO:  need to find this file (same issue in LldbHookTests
-			String dproc = DummyProc.which("expCloneExit");
-			conn.execute("file " + dproc);
+			conn.execute("file " + getSpecimenNewThreadAndExit());
 			conn.execute("ghidra trace start");
 			txPut(conn, "processes");
 			breakAt(conn, "work");
 
 			RemoteMethod activateThread = conn.getMethod("activate_thread");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expCloneExit")) {
+			try (ManagedDomainObject mdo = openDomainObject(
+				IS_WINDOWS ? projectName("expCreateThreadExit") : projectName("expCloneExit"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 				waitTxDone();
@@ -389,7 +391,7 @@ public void testActivateThread() throws Exception {
 						.getValuePaths(Lifespan.at(0), pattern)
 						.map(p -> p.getDestination(null))
 						.toList();
-				assertEquals(2, list.size());
+				assertTrue(list.size() > getSleepThreadCount());
 
 				for (TraceObject t : list) {
 					activateThread.invoke(Map.of("thread", t));
@@ -398,7 +400,8 @@ public void testActivateThread() throws Exception {
 					long index = Long.decode(indices.get(1));
 					assertThat(out, Matchers
 							.either(containsString("tid = %s".formatted(index)))
-							.or(containsString("tid = 0x%x".formatted(index))));
+							.or(containsString("tid = 0x%x".formatted(index)))
+							.or(containsString("tid = 0x0%x".formatted(index))));
 				}
 			}
 			conn.success();
@@ -411,10 +414,10 @@ public void testActivateFrame() throws Exception {
 			conn.execute("file " + getSpecimenPrint());
 			conn.execute("ghidra trace start");
 			txPut(conn, "processes");
-			breakAt(conn, "puts");
+			breakAt(conn, "wrapputs");
 
 			RemoteMethod activateFrame = conn.getMethod("activate_frame");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 				waitTxDone();
@@ -446,7 +449,7 @@ public void testRemoveProcess() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod removeProcess = conn.getMethod("remove_process");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 
 				TraceObject proc2 = Objects.requireNonNull(tb.objAny0("Processes[]"));
@@ -520,7 +523,7 @@ public void testDetach() throws Exception {
 			//conn.execute("process attach -p %d".formatted(dproc.pid));
 
 			RemoteMethod detach = conn.getMethod("detach");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 
 				TraceObject proc = Objects.requireNonNull(tb.objAny0("Processes[]"));
@@ -551,7 +554,7 @@ public void testLaunchEntry() throws Exception {
 				waitStopped(conn);
 
 				String out = conn.executeCapture("target list");
-				assertThat(out, containsString(getSpecimenPrint()));
+				assertThat(out, containsString(DummyProc.which("expPrint")));
 			}
 			conn.success();
 		}
@@ -596,7 +599,7 @@ public void testKill() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod kill = conn.getMethod("kill");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 
@@ -651,7 +654,7 @@ public void testStepInto() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod step_into = conn.getMethod("step_into");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 				waitTxDone();
@@ -681,7 +684,7 @@ public void testStepOver() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod step_over = conn.getMethod("step_over");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 				txPut(conn, "threads");
@@ -711,7 +714,7 @@ public void testStepAdvance() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod step_advance = conn.getMethod("step_advance");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 				txPut(conn, "threads");
@@ -737,14 +740,16 @@ public void testStepAdvance() throws Exception {
 	@Test
 	public void testFinish() throws Exception {
 		try (LldbAndConnection conn = startAndConnectLldb()) {
-			conn.execute("file " + getSpecimenPrint());
+			// NB: These examples have shorter per-platform "step out"'s
+			conn.execute("file " + (IS_WINDOWS ? getSpecimenRead() : getSpecimenPrint()));
 			conn.execute("ghidra trace start");
 			txPut(conn, "processes");
-			breakAt(conn, "puts");
+			breakAt(conn, IS_WINDOWS ? "wrapread" : "wrapputs");
 
 			RemoteMethod activate = conn.getMethod("activate_thread");
 			RemoteMethod step_out = conn.getMethod("step_out");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo =
+				openDomainObject(projectName(IS_WINDOWS ? "expRead" : "expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 				waitTxDone();
@@ -757,6 +762,7 @@ public void testFinish() throws Exception {
 				int initDepth = getDepth(conn);
 
 				step_out.invoke(Map.of("thread", thread));
+				waitStopped(conn);
 
 				int finalDepth = getDepth(conn);
 				assertEquals(initDepth - 1, finalDepth);
@@ -771,11 +777,11 @@ public void testStepReturn() throws Exception {
 			conn.execute("file " + getSpecimenPrint());
 			conn.execute("ghidra trace start");
 			txPut(conn, "processes");
-			breakAt(conn, "puts");
+			breakAt(conn, "wrapputs");
 
 			RemoteMethod activate = conn.getMethod("activate_thread");
 			RemoteMethod ret = conn.getMethod("step_return");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 				waitTxDone();
@@ -803,7 +809,7 @@ public void testBreakAddress() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod breakAddress = conn.getMethod("break_address");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 
 				TraceObject proc = Objects.requireNonNull(tb.objAny0("Processes[]"));
@@ -825,7 +831,7 @@ public void testBreakExpression() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod breakExpression = conn.getMethod("break_expression");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 
@@ -846,7 +852,7 @@ public void testBreakHardwareAddress() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod breakAddress = conn.getMethod("break_hw_address");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 
@@ -868,7 +874,7 @@ public void testBreakHardwareExpression() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod breakExpression = conn.getMethod("break_hw_expression");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 
@@ -890,7 +896,7 @@ public void testBreakReadRange() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod breakRange = conn.getMethod("break_read_range");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 
@@ -917,7 +923,7 @@ public void testBreakReadExpression() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod breakExpression = conn.getMethod("break_read_expression");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 
 				breakExpression.invoke(Map.of(
@@ -940,7 +946,7 @@ public void testBreakWriteRange() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod breakRange = conn.getMethod("break_write_range");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 
@@ -969,7 +975,7 @@ public void testBreakWriteExpression() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod breakExpression = conn.getMethod("break_write_expression");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 
 				breakExpression.invoke(Map.of(
@@ -994,7 +1000,7 @@ public void testBreakAccessRange() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod breakRange = conn.getMethod("break_access_range");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 
@@ -1021,7 +1027,7 @@ public void testBreakAccessExpression() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod breakExpression = conn.getMethod("break_access_expression");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 
 				breakExpression.invoke(Map.of(
@@ -1045,7 +1051,7 @@ public void testBreakException() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod breakExc = conn.getMethod("break_exception");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 
 				breakExc.invoke(Map.of("lang", "C++"));
@@ -1065,7 +1071,7 @@ public void testToggleBreakpoint() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod toggleBreakpoint = conn.getMethod("toggle_breakpoint");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 
@@ -1089,7 +1095,7 @@ public void testToggleBreakpointLocation() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod toggleBreakpointLocation = conn.getMethod("toggle_breakpoint_location");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 
@@ -1114,7 +1120,7 @@ public void testDeleteBreakpoint() throws Exception {
 			txPut(conn, "processes");
 
 			RemoteMethod deleteBreakpoint = conn.getMethod("delete_breakpoint");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 				waitStopped(conn);
 
@@ -1139,7 +1145,7 @@ public void testDeleteWatchpoint() throws Exception {
 
 			RemoteMethod breakExpression = conn.getMethod("break_read_expression");
 			RemoteMethod deleteWatchpoint = conn.getMethod("delete_watchpoint");
-			try (ManagedDomainObject mdo = openDomainObject("/New Traces/lldb/expPrint")) {
+			try (ManagedDomainObject mdo = openDomainObject(projectName("expPrint"))) {
 				tb = new ToyDBTraceBuilder((Trace) mdo.get());
 
 				breakExpression.invoke(Map.of(
```
-----------------------------------
