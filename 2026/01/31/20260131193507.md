# Commit: 2fed7541a083a7b565ce12282630abddb6f0e5e2
## Message: GP-6176: Better logging from AbstractObjcTypeMetadata
## Diff:
```
diff --git a/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/AbstractObjcTypeMetadata.java b/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/AbstractObjcTypeMetadata.java
index 03139e71ef1..b86b36f3f3b 100644
--- a/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/AbstractObjcTypeMetadata.java
+++ b/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/AbstractObjcTypeMetadata.java
@@ -18,7 +18,6 @@
 import java.io.Closeable;
 import java.io.IOException;
 
-import ghidra.app.util.bin.format.objc.objc1.Objc1TypeMetadata;
 import ghidra.app.util.importer.MessageLog;
 import ghidra.program.model.listing.Program;
 import ghidra.util.exception.CancelledException;
@@ -60,7 +59,17 @@ public AbstractObjcTypeMetadata(ObjcState state, Program program, TaskMonitor mo
 	 * @param message The message to log
 	 */
 	public void log(String message) {
-		log.appendMsg(Objc1TypeMetadata.class.getSimpleName(), message);
+		log.appendMsg(getClass().getSimpleName(), message);
+	}
+
+	/**
+	 * Convenience method to perform logging (with exception)
+	 * 
+	 * @param message The message to log
+	 * @param e The exception to log
+	 */
+	public void log(String message, Exception e) {
+		log.appendMsg(getClass().getSimpleName(), message + ": " + e.getMessage());
 	}
 
 	@Override
diff --git a/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc1/Objc1TypeMetadata.java b/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc1/Objc1TypeMetadata.java
index c55dc26d312..69dbdbb9116 100644
--- a/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc1/Objc1TypeMetadata.java
+++ b/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc1/Objc1TypeMetadata.java
@@ -93,7 +93,7 @@ private void parseModules(String section, BinaryReader reader) throws CancelledE
 			}
 		}
 		catch (IOException e) {
-			log("Failed to parse modules from section '" + section + "'");
+			log("Failed to parse modules from section '" + section + "'", e);
 		}
 	}
 
@@ -112,7 +112,7 @@ private void parseProtocols(String section, BinaryReader reader) throws Cancelle
 			}
 		}
 		catch (IOException e) {
-			log("Failed to parse protocols from section '" + section + "'");
+			log("Failed to parse protocols from section '" + section + "'", e);
 		}
 	}
 
@@ -123,7 +123,7 @@ public void applyTo() {
 				module.applyTo(program.getGlobalNamespace(), monitor);
 			}
 			catch (Exception e) {
-				log("Failed to markup: " + module.getName());
+				log("Failed to markup: " + module.getName(), e);
 			}
 		}
 		for (Objc1Protocol protocol : protocols) {
@@ -131,7 +131,7 @@ public void applyTo() {
 				protocol.applyTo(program.getGlobalNamespace(), monitor);
 			}
 			catch (Exception e) {
-				log("Failed to markup: " + protocol.getName());
+				log("Failed to markup: " + protocol.getName(), e);
 			}
 		}
 
diff --git a/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc2/Objc2TypeMetadata.java b/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc2/Objc2TypeMetadata.java
index 8e2ab3e68b8..2bb4e9368ba 100644
--- a/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc2/Objc2TypeMetadata.java
+++ b/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc2/Objc2TypeMetadata.java
@@ -180,7 +180,7 @@ private void parseCategoryList(String section, BinaryReader reader,
 			}
 		}
 		catch (IOException e) {
-			log("Failed to parse Objective-C categeory from section '" + section + "'");
+			log("Failed to parse Objective-C categeory from section '" + section + "'", e);
 		}
 	}
 
@@ -206,7 +206,7 @@ private void parseClassList(String section, BinaryReader reader,
 			}
 		}
 		catch (IOException e) {
-			log("Failed to parse Objective-C class from section '" + section + "'");
+			log("Failed to parse Objective-C class from section '" + section + "'", e);
 		}
 	}
 
@@ -233,7 +233,7 @@ private void parseProtocolList(String section, BinaryReader reader,
 			}
 		}
 		catch (IOException e) {
-			log("Failed to parse Objective-C protocol from section '" + section + "'");
+			log("Failed to parse Objective-C protocol from section '" + section + "'", e);
 		}
 	}
 
@@ -256,7 +256,7 @@ private void parseMessageReferences(String section, BinaryReader reader,
 			}
 		}
 		catch (IOException e) {
-			log("Failed to parse Objective-C message reference from section '" + section + "'");
+			log("Failed to parse Objective-C message reference from section '" + section + "'", e);
 		}
 	}
 
@@ -270,7 +270,8 @@ private void parseLibObjcOptimization(String section,
 			}
 		}
 		catch (IOException e) {
-			log("Failed to parse Objective-C libObjc optimizations from section '" + section + "'");
+			log("Failed to parse Objective-C libObjc optimizations from section '" + section + "'",
+				e);
 		}
 	}
 
@@ -282,7 +283,7 @@ public void applyTo() {
 					DataUtilities.ClearDataMode.CLEAR_SINGLE_DATA);
 			}
 			catch (Exception e) {
-				log("Failed to create pointer at " + addr);
+				log("Failed to create pointer at " + addr, e);
 			}
 		}
 		for (Objc2ImageInfo imageInfo : imageInfos) {
@@ -290,7 +291,7 @@ public void applyTo() {
 				imageInfo.applyTo(program.getGlobalNamespace(), monitor);
 			}
 			catch (Exception e) {
-				log("Failed to markup: " + imageInfo);
+				log("Failed to markup: " + imageInfo, e);
 			}
 		}
 		for (Objc2Category category : categories) {
@@ -298,7 +299,7 @@ public void applyTo() {
 				category.applyTo(program.getGlobalNamespace(), monitor);
 			}
 			catch (Exception e) {
-				log("Failed to markup: " + category);
+				log("Failed to markup: " + category, e);
 			}
 		}
 		for (Objc2Class cls : classes) {
@@ -306,7 +307,7 @@ public void applyTo() {
 				cls.applyTo(program.getGlobalNamespace(), monitor);
 			}
 			catch (Exception e) {
-				log("Failed to markup: " + cls);
+				log("Failed to markup: " + cls, e);
 			}
 		}
 		for (Objc2Protocol protocol : protocols) {
@@ -316,7 +317,7 @@ public void applyTo() {
 				protocol.applyTo(namespace, monitor);
 			}
 			catch (Exception e) {
-				log("Failed to markup: " + protocol);
+				log("Failed to markup: " + protocol, e);
 			}
 		}
 		for (Objc2MessageReference messageRef : messageRefs) {
@@ -324,7 +325,7 @@ public void applyTo() {
 				messageRef.applyTo(program.getGlobalNamespace(), monitor);
 			}
 			catch (Exception e) {
-				log("Failed to markup: " + messageRef);
+				log("Failed to markup: " + messageRef, e);
 			}
 		}
 
```
-----------------------------------
