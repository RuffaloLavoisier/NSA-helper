# Commit: f27a090911e31aeab239bafaf420665cb04698fa
## Message: GP-6371 - Gnu Demangler - Fixed failure to parse a global guard variable
## Diff:
```
diff --git a/Ghidra/Features/GnuDemangler/src/main/java/ghidra/app/util/demangler/gnu/GnuDemanglerParser.java b/Ghidra/Features/GnuDemangler/src/main/java/ghidra/app/util/demangler/gnu/GnuDemanglerParser.java
index 63798aef8a4..8892cca63c1 100644
--- a/Ghidra/Features/GnuDemangler/src/main/java/ghidra/app/util/demangler/gnu/GnuDemanglerParser.java
+++ b/Ghidra/Features/GnuDemangler/src/main/java/ghidra/app/util/demangler/gnu/GnuDemanglerParser.java
@@ -665,8 +665,8 @@ private DemangledObject parseItemInNamespace(String itemText) {
 
 		int pos = itemText.lastIndexOf(Namespace.DELIMITER);
 		if (pos == -1) {
-			throw new DemanglerParseException(
-				"Expected the demangled string to contain a namespace");
+			// We now allow this case instead of throwing an exception
+			return null;
 		}
 
 		String parentText = itemText.substring(0, pos);
@@ -1715,6 +1715,12 @@ DemangledObject doBuild(Demangled namespace) {
 
 	}
 
+	/*
+	 	Note: this class is used to handle things like 'guard variable for' or other items that 
+	 	don't parse directly as functions or variables.  Historically these items have always been
+	 	in a parent non-global namespace.  Global variables do not have a parent namespace as part 
+	 	of their name.  We have changed this class to allow the case of no specified namespace.
+	 */
 	private class ItemInNamespaceHandler extends SpecialPrefixHandler {
 
 		ItemInNamespaceHandler(String demangled) {
@@ -1728,6 +1734,11 @@ private class ItemInNamespaceHandler extends SpecialPrefixHandler {
 		@Override
 		DemangledObject doBuild(Demangled namespace) {
 			DemangledObject demangledObject = parseItemInNamespace(type);
+			if (demangledObject == null) {
+				// The item we are demangling is global and not in a namespace.  Assume the item 
+				// passed in is the valid demangled object.
+				return (DemangledObject) namespace;
+			}
 			return demangledObject;
 		}
 	}
diff --git a/Ghidra/Features/GnuDemangler/src/test/java/ghidra/app/util/demangler/GnuDemanglerParserTest.java b/Ghidra/Features/GnuDemangler/src/test/java/ghidra/app/util/demangler/GnuDemanglerParserTest.java
index 8a56e2bb84a..e16b87da2ba 100644
--- a/Ghidra/Features/GnuDemangler/src/test/java/ghidra/app/util/demangler/GnuDemanglerParserTest.java
+++ b/Ghidra/Features/GnuDemangler/src/test/java/ghidra/app/util/demangler/GnuDemanglerParserTest.java
@@ -672,6 +672,26 @@ public void testGuardVariable_ThreadPointer() throws Exception {
 		assertNull(variable.getDataType()); // no type information provided
 	}
 
+	@Test
+	public void testGuardVariable_GlobalVariable() throws Exception {
+
+		String mangled = "_ZGV17globalVariableFoo";
+
+		String demangled = process.demangle(mangled);
+
+		assertEquals("guard variable for globalVariableFoo", demangled);
+
+		DemangledObject object = parser.parse(mangled, demangled);
+		assertType(object, DemangledVariable.class);
+		assertName(object, "globalVariableFoo");
+
+		assertEquals("globalVariableFoo", object.getSignature(false));
+
+		DemangledVariable variable = (DemangledVariable) object;
+		assertEquals("globalVariableFoo", variable.getName());
+		assertNull(variable.getDataType()); // no type information provided
+	}
+
 	@Test
 	public void testConstFunction() throws Exception {
 		//
```
-----------------------------------
