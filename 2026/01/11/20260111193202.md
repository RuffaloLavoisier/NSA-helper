# Commit: adbb086cfb608b61ae7ff27ed8d1930f0377a117
## Message: GP-6176: More Objective-C type metadata analyzers refactoring
## Diff:
```
diff --git a/Ghidra/Features/Base/src/main/java/ghidra/app/plugin/core/analysis/objc/ObjcTypeMetadataAnalyzer.java b/Ghidra/Features/Base/src/main/java/ghidra/app/plugin/core/analysis/ObjcTypeMetadataAnalyzer.java
similarity index 98%
rename from Ghidra/Features/Base/src/main/java/ghidra/app/plugin/core/analysis/objc/ObjcTypeMetadataAnalyzer.java
rename to Ghidra/Features/Base/src/main/java/ghidra/app/plugin/core/analysis/ObjcTypeMetadataAnalyzer.java
index a0f3253d9f8..f3825a0fd87 100644
--- a/Ghidra/Features/Base/src/main/java/ghidra/app/plugin/core/analysis/objc/ObjcTypeMetadataAnalyzer.java
+++ b/Ghidra/Features/Base/src/main/java/ghidra/app/plugin/core/analysis/ObjcTypeMetadataAnalyzer.java
@@ -13,7 +13,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package ghidra.app.plugin.core.analysis.objc;
+package ghidra.app.plugin.core.analysis;
 
 import ghidra.app.services.*;
 import ghidra.app.util.bin.format.objc.AbstractObjcTypeMetadata;
diff --git a/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/ObjcTypeMetadataStructure.java b/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/ObjcTypeMetadataStructure.java
index fcae08e03ae..16f5048eb3c 100644
--- a/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/ObjcTypeMetadataStructure.java
+++ b/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/ObjcTypeMetadataStructure.java
@@ -96,4 +96,9 @@ public boolean isArm() {
 	 * @throws Exception if an error occurred
 	 */
 	public abstract void applyTo(Namespace namespace, TaskMonitor monitor) throws Exception;
+
+	@Override
+	public String toString() {
+		return "%s at 0x%x".formatted(getClass().getSimpleName(), base);
+	}
 }
diff --git a/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/ObjcUtils.java b/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/ObjcUtils.java
index 3ce932c32e5..c8d059ebb5e 100644
--- a/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/ObjcUtils.java
+++ b/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/ObjcUtils.java
@@ -139,17 +139,18 @@ public static Address toAddress(Program program, long offset) {
 	 * @param program The {@link Program}
 	 * @param dt The {@link DataType} to apply
 	 * @param address The {@link Address} to apply the data type at
+	 * @return The {@link Data}
 	 * @throws CodeUnitInsertionException if data creation failed
 	 */
-	public static void createData(Program program, DataType dt, Address address)
+	public static Data createData(Program program, DataType dt, Address address)
 			throws CodeUnitInsertionException {
 		Data data = program.getListing().getDefinedDataAt(address);
 		if (data != null && data.getDataType().isEquivalent(dt)) {
-			return;
+			return data;
 		}
 
 		// Clear possible pointers created on import from following pointer chains
-		DataUtilities.createData(program, address, dt, -1,
+		return DataUtilities.createData(program, address, dt, -1,
 			ClearDataMode.CLEAR_ALL_DEFAULT_CONFLICT_DATA);
 	}
 
diff --git a/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc1/Objc1TypeMetadata.java b/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc1/Objc1TypeMetadata.java
index 84d07699b35..c55dc26d312 100644
--- a/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc1/Objc1TypeMetadata.java
+++ b/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc1/Objc1TypeMetadata.java
@@ -123,7 +123,7 @@ public void applyTo() {
 				module.applyTo(program.getGlobalNamespace(), monitor);
 			}
 			catch (Exception e) {
-				log("Failed to markup module: " + module.getName());
+				log("Failed to markup: " + module.getName());
 			}
 		}
 		for (Objc1Protocol protocol : protocols) {
@@ -131,7 +131,7 @@ public void applyTo() {
 				protocol.applyTo(program.getGlobalNamespace(), monitor);
 			}
 			catch (Exception e) {
-				log("Failed to markup protocol: " + protocol.getName());
+				log("Failed to markup: " + protocol.getName());
 			}
 		}
 
diff --git a/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc2/Objc2Constants.java b/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc2/Objc2Constants.java
index 54031fa48c1..dcdefa8f774 100644
--- a/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc2/Objc2Constants.java
+++ b/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc2/Objc2Constants.java
@@ -44,6 +44,7 @@ public final class Objc2Constants {
 	public final static String OBJC2_PROTOCOL_REFS = "__objc_protorefs";
 	public final static String OBJC2_SELECTOR_REFS = "__objc_selrefs";
 	public final static String OBJC2_SUPER_REFS = "__objc_superrefs";
+	public final static String OBJC2_STUBS = "__objc_stubs";
 
 	/**
 	 * Returns a list containing valid Objective-C 2.0 section names.
diff --git a/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc2/Objc2TypeMetadata.java b/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc2/Objc2TypeMetadata.java
index c6371d733da..d48cfdb63b0 100644
--- a/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc2/Objc2TypeMetadata.java
+++ b/Ghidra/Features/Base/src/main/java/ghidra/app/util/bin/format/objc/objc2/Objc2TypeMetadata.java
@@ -248,7 +248,7 @@ public void applyTo() {
 				imageInfo.applyTo(program.getGlobalNamespace(), monitor);
 			}
 			catch (Exception e) {
-				log("Failed to markup image info: " + imageInfo);
+				log("Failed to markup: " + imageInfo);
 			}
 		}
 		for (Objc2Category category : categories) {
@@ -256,7 +256,7 @@ public void applyTo() {
 				category.applyTo(program.getGlobalNamespace(), monitor);
 			}
 			catch (Exception e) {
-				log("Failed to markup category: " + category);
+				log("Failed to markup: " + category);
 			}
 		}
 		for (Objc2Class cls : classes) {
@@ -264,7 +264,7 @@ public void applyTo() {
 				cls.applyTo(program.getGlobalNamespace(), monitor);
 			}
 			catch (Exception e) {
-				log("Failed to markup class: " + cls);
+				log("Failed to markup: " + cls);
 			}
 		}
 		for (Objc2Protocol protocol : protocols) {
@@ -274,7 +274,7 @@ public void applyTo() {
 				protocol.applyTo(namespace, monitor);
 			}
 			catch (Exception e) {
-				log("Failed to markup protocol: " + protocol);
+				log("Failed to markup: " + protocol);
 			}
 		}
 		for (Objc2MessageReference messageRef : messageRefs) {
@@ -282,7 +282,7 @@ public void applyTo() {
 				messageRef.applyTo(program.getGlobalNamespace(), monitor);
 			}
 			catch (Exception e) {
-				log("Failed to markup message reference: " + messageRef);
+				log("Failed to markup: " + messageRef);
 			}
 		}
 
```
-----------------------------------
