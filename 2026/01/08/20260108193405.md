# Commit: 5112c0024f1b2fe958b90d8d9921366809dabdff
## Message: Merge remote-tracking branch 'origin/patch'
## Diff:
```
diff --git a/Ghidra/Features/Decompiler/ghidra_scripts/classrecovery/RTTIWindowsClassRecoverer.java b/Ghidra/Features/Decompiler/ghidra_scripts/classrecovery/RTTIWindowsClassRecoverer.java
index 4495c7538eb..d775f045d0b 100644
--- a/Ghidra/Features/Decompiler/ghidra_scripts/classrecovery/RTTIWindowsClassRecoverer.java
+++ b/Ghidra/Features/Decompiler/ghidra_scripts/classrecovery/RTTIWindowsClassRecoverer.java
@@ -2381,19 +2381,23 @@ private Structure createClassStructureUsingRTTI(RecoveredClass recoveredClass,
 			Map<Integer, Address> classOffsetToVftableMap =
 				recoveredClass.getClassOffsetToVftableMap();
 			Set<Integer> classVftableOffsets = classOffsetToVftableMap.keySet();
-			List<Integer> sortedOffsets = new ArrayList<Integer>(classVftableOffsets);
-			Collections.sort(sortedOffsets);
 
-			Integer offset = sortedOffsets.get(0);
+			if (!classVftableOffsets.isEmpty()) {
 
-			Address vftableAddress = classOffsetToVftableMap.get(offset);
+				List<Integer> sortedOffsets = new ArrayList<Integer>(classVftableOffsets);
+				Collections.sort(sortedOffsets);
 
-			DataType classVftablePointer = vfPointerDataTypes.get(vftableAddress);
+				Integer offset = sortedOffsets.get(0);
 
-			// if it fits at offset or is at the end and class structure can be grown, 
-			// copy the whole baseClass structure to the class Structure at the given offset
-			EditStructureUtils.addDataTypeToStructure(classStructureDataType, offset.intValue(),
-				classVftablePointer, CLASS_VTABLE_PTR_FIELD_EXT, monitor);
+				Address vftableAddress = classOffsetToVftableMap.get(offset);
+
+				DataType classVftablePointer = vfPointerDataTypes.get(vftableAddress);
+
+				// if it fits at offset or is at the end and class structure can be grown, 
+				// copy the whole baseClass structure to the class Structure at the given offset
+				EditStructureUtils.addDataTypeToStructure(classStructureDataType, offset.intValue(),
+					classVftablePointer, CLASS_VTABLE_PTR_FIELD_EXT, monitor);
+			}
 		}
 
 		// add the vbtable structure for single inheritance/virt parent case
diff --git a/Ghidra/Framework/SoftwareModeling/src/main/java/ghidra/program/database/data/CompositeDBAdapterV1.java b/Ghidra/Framework/SoftwareModeling/src/main/java/ghidra/program/database/data/CompositeDBAdapterV1.java
index 4b83f7ff315..fafe64d1dd3 100644
--- a/Ghidra/Framework/SoftwareModeling/src/main/java/ghidra/program/database/data/CompositeDBAdapterV1.java
+++ b/Ghidra/Framework/SoftwareModeling/src/main/java/ghidra/program/database/data/CompositeDBAdapterV1.java
@@ -135,7 +135,7 @@ public DBRecord translateRecord(DBRecord oldRec) {
 			oldRec.getBooleanValue(V1_COMPOSITE_IS_UNION_COL));
 		rec.setLongValue(COMPOSITE_CAT_COL, oldRec.getLongValue(V1_COMPOSITE_CAT_COL));
 		rec.setIntValue(COMPOSITE_LENGTH_COL, oldRec.getIntValue(V1_COMPOSITE_LENGTH_COL));
-		rec.setIntValue(COMPOSITE_ALIGNMENT_COL, oldRec.getIntValue(-1));
+		rec.setIntValue(COMPOSITE_ALIGNMENT_COL, -1);
 		rec.setIntValue(COMPOSITE_NUM_COMPONENTS_COL,
 			oldRec.getIntValue(V1_COMPOSITE_NUM_COMPONENTS_COL));
 		rec.setLongValue(COMPOSITE_SOURCE_ARCHIVE_ID_COL,
```
-----------------------------------
