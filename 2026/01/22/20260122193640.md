# Commit: 89e6b57a74be35fe68520442be53acd5dc787569
## Message: Merge remote-tracking branch 'origin/GP-6026_Dan_addBreakLocExpressionColumn--SQUASHED' into patch
## Diff:
```
diff --git a/Ghidra/Debug/Debugger/src/main/help/help/topics/DebuggerBreakpointsPlugin/DebuggerBreakpointsPlugin.html b/Ghidra/Debug/Debugger/src/main/help/help/topics/DebuggerBreakpointsPlugin/DebuggerBreakpointsPlugin.html
index daa63d10459..813e16dbd2d 100644
--- a/Ghidra/Debug/Debugger/src/main/help/help/topics/DebuggerBreakpointsPlugin/DebuggerBreakpointsPlugin.html
+++ b/Ghidra/Debug/Debugger/src/main/help/help/topics/DebuggerBreakpointsPlugin/DebuggerBreakpointsPlugin.html
@@ -149,8 +149,11 @@ <H2>Tables and Columns</H2>
       <LI>Threads - (hidden by default) if the breakpoint applies to a limited set of threads,
       gives the list of threads.</LI>
 
-      <LI>Comment - gives a user comment &mdash; the specification's expression by default. This
-      field is user modifiable.</LI>
+      <LI>Comment - gives a user comment. This field is user modifiable.</LI>
+
+      <LI>Expression - the expression given by the user when placing the breakpoint. This ought to
+      echo back what was typed into the CLI, if applicable. When placed via a Listing, this often
+      refers to the dynamic address.</LI>
 
       <LI>Sleigh - indicates whether or not the location has a customized Sleigh configuration.
       This is only relevant for emulation.</LI>
@@ -319,7 +322,7 @@ <H3><A name="set_injection"></A>Set Injection (Emulator)</H3>
         Alternatively, suppose the example instruction is <CODE>JZ 0x00401234</CODE>. Then, the
         injection can jump straight to the target: 
 <PRE>
-goto [0x00401234];
+goto 0x00401234;
 </PRE>
       </LI>
 
diff --git a/Ghidra/Debug/Debugger/src/main/help/help/topics/DebuggerBreakpointsPlugin/images/DebuggerBreakpointsPlugin.png b/Ghidra/Debug/Debugger/src/main/help/help/topics/DebuggerBreakpointsPlugin/images/DebuggerBreakpointsPlugin.png
index 77722233b84..5615abc9f60 100644
Binary files a/Ghidra/Debug/Debugger/src/main/help/help/topics/DebuggerBreakpointsPlugin/images/DebuggerBreakpointsPlugin.png and b/Ghidra/Debug/Debugger/src/main/help/help/topics/DebuggerBreakpointsPlugin/images/DebuggerBreakpointsPlugin.png differ
diff --git a/Ghidra/Debug/Debugger/src/main/java/ghidra/app/plugin/core/debug/gui/breakpoint/BreakpointLocationRow.java b/Ghidra/Debug/Debugger/src/main/java/ghidra/app/plugin/core/debug/gui/breakpoint/BreakpointLocationRow.java
index c835c5c32a7..543972d6ea0 100644
--- a/Ghidra/Debug/Debugger/src/main/java/ghidra/app/plugin/core/debug/gui/breakpoint/BreakpointLocationRow.java
+++ b/Ghidra/Debug/Debugger/src/main/java/ghidra/app/plugin/core/debug/gui/breakpoint/BreakpointLocationRow.java
@@ -25,6 +25,7 @@
 import ghidra.program.model.address.Address;
 import ghidra.program.util.ProgramLocation;
 import ghidra.trace.model.breakpoint.TraceBreakpointLocation;
+import ghidra.trace.model.breakpoint.TraceBreakpointSpec;
 
 public class BreakpointLocationRow {
 	private final DebuggerBreakpointsProvider provider;
@@ -113,6 +114,15 @@ public void setComment(String comment) {
 		}
 	}
 
+	public String getExpression() {
+		TraceBreakpointSpec spec = loc.getSpecification();
+		if (spec == null) {
+			// Shouldn't happen, but may in the interim
+			return "";
+		}
+		return spec.getExpression(getSnap());
+	}
+
 	public boolean hasSleigh() {
 		return !SleighUtils.UNCONDITIONAL_BREAK.equals(loc.getEmuSleigh(getSnap()));
 	}
diff --git a/Ghidra/Debug/Debugger/src/main/java/ghidra/app/plugin/core/debug/gui/breakpoint/DebuggerBreakpointsProvider.java b/Ghidra/Debug/Debugger/src/main/java/ghidra/app/plugin/core/debug/gui/breakpoint/DebuggerBreakpointsProvider.java
index c7a90e983bb..88d460684b9 100644
--- a/Ghidra/Debug/Debugger/src/main/java/ghidra/app/plugin/core/debug/gui/breakpoint/DebuggerBreakpointsProvider.java
+++ b/Ghidra/Debug/Debugger/src/main/java/ghidra/app/plugin/core/debug/gui/breakpoint/DebuggerBreakpointsProvider.java
@@ -70,8 +70,9 @@ public class DebuggerBreakpointsProvider extends ComponentProviderAdapter
 
 	protected enum LogicalBreakpointTableColumns
 		implements EnumeratedTableColumn<LogicalBreakpointTableColumns, LogicalBreakpointRow> {
-		STATE("State", State.class, LogicalBreakpointRow::getState, LogicalBreakpointRow::setState, true),
-		NAME("Name", String.class, LogicalBreakpointRow::getName, LogicalBreakpointRow::setName, //
+		STATE("State", State.class, LogicalBreakpointRow::getState, LogicalBreakpointRow::setState,
+				true),
+		NAME("Name", String.class, LogicalBreakpointRow::getName, LogicalBreakpointRow::setName,
 				LogicalBreakpointRow::isNamable, true),
 		ADDRESS("Address", Address.class, LogicalBreakpointRow::getAddress, true),
 		IMAGE("Image", String.class, LogicalBreakpointRow::getImageName, true),
@@ -142,8 +143,8 @@ public void setValueOf(LogicalBreakpointRow row, Object value) {
 		}
 	}
 
-	protected static class LogicalBreakpointTableModel extends RowWrappedEnumeratedColumnTableModel< //
-			LogicalBreakpointTableColumns, LogicalBreakpoint, LogicalBreakpointRow, LogicalBreakpoint> {
+	protected static class LogicalBreakpointTableModel extends RowWrappedEnumeratedColumnTableModel<
+		LogicalBreakpointTableColumns, LogicalBreakpoint, LogicalBreakpointRow, LogicalBreakpoint> {
 
 		public LogicalBreakpointTableModel(DebuggerBreakpointsProvider provider) {
 			super(provider.getTool(), "Breakpoints", LogicalBreakpointTableColumns.class, lb -> lb,
@@ -160,12 +161,16 @@ public List<LogicalBreakpointTableColumns> defaultSortOrder() {
 
 	protected enum BreakpointLocationTableColumns
 		implements EnumeratedTableColumn<BreakpointLocationTableColumns, BreakpointLocationRow> {
-		STATE("State", State.class, BreakpointLocationRow::getState, BreakpointLocationRow::setState, true, true),
-		NAME("Name", String.class, BreakpointLocationRow::getName, BreakpointLocationRow::setName, true, true),
+		STATE("State", State.class, BreakpointLocationRow::getState,
+				BreakpointLocationRow::setState, true, true),
+		NAME("Name", String.class, BreakpointLocationRow::getName, BreakpointLocationRow::setName,
+				true, true),
 		ADDRESS("Address", Address.class, BreakpointLocationRow::getAddress, true, true),
 		TRACE("Trace", String.class, BreakpointLocationRow::getTraceName, true, true),
 		THREADS("Threads", String.class, BreakpointLocationRow::getThreads, true, false),
-		COMMENT("Comment", String.class, BreakpointLocationRow::getComment, BreakpointLocationRow::setComment, true, true),
+		COMMENT("Comment", String.class, BreakpointLocationRow::getComment,
+				BreakpointLocationRow::setComment, true, true),
+		EXPRESSION("Expression", String.class, BreakpointLocationRow::getExpression, true, true),
 		SLEIGH("Sleigh", Boolean.class, BreakpointLocationRow::hasSleigh, true, true);
 
 		private final String header;
@@ -229,9 +234,8 @@ public void setValueOf(BreakpointLocationRow row, Object value) {
 	}
 
 	protected static class BreakpointLocationTableModel
-			extends RowWrappedEnumeratedColumnTableModel< //
-					BreakpointLocationTableColumns, ObjectKey, BreakpointLocationRow, //
-					TraceBreakpointLocation> {
+			extends RowWrappedEnumeratedColumnTableModel<BreakpointLocationTableColumns, ObjectKey,
+				BreakpointLocationRow, TraceBreakpointLocation> {
 
 		public BreakpointLocationTableModel(DebuggerBreakpointsProvider provider) {
 			super(provider.getTool(), "Locations", BreakpointLocationTableColumns.class,
diff --git a/Ghidra/Test/DebuggerIntegrationTest/src/screen/java/ghidra/app/plugin/core/debug/gui/breakpoint/DebuggerBreakpointsPluginScreenShots.java b/Ghidra/Test/DebuggerIntegrationTest/src/screen/java/ghidra/app/plugin/core/debug/gui/breakpoint/DebuggerBreakpointsPluginScreenShots.java
index fee2453f98b..3618e91f62c 100644
--- a/Ghidra/Test/DebuggerIntegrationTest/src/screen/java/ghidra/app/plugin/core/debug/gui/breakpoint/DebuggerBreakpointsPluginScreenShots.java
+++ b/Ghidra/Test/DebuggerIntegrationTest/src/screen/java/ghidra/app/plugin/core/debug/gui/breakpoint/DebuggerBreakpointsPluginScreenShots.java
@@ -44,7 +44,7 @@
 import ghidra.trace.database.ToyDBTraceBuilder;
 import ghidra.trace.database.breakpoint.DBTraceBreakpointManager;
 import ghidra.trace.model.*;
-import ghidra.trace.model.breakpoint.TraceBreakpointKind;
+import ghidra.trace.model.breakpoint.*;
 import ghidra.util.Msg;
 import ghidra.util.task.TaskMonitor;
 import help.screenshot.GhidraScreenShotGenerator;
@@ -151,11 +151,20 @@ public void testCaptureDebuggerBreakpointsPlugin() throws Throwable {
 				long snap = tb1.trace.getTimeManager().createSnapshot("First").getKey();
 
 				DBTraceBreakpointManager bm = tb1.trace.getBreakpointManager();
-				bm.placeBreakpoint("Breakpoints[1]", snap, tb1.addr(0x00401234), List.of(),
-					Set.of(TraceBreakpointKind.SW_EXECUTE), true, "ram:00401234");
-				bm.placeBreakpoint("Breakpoints[2]", snap, tb1.range(0x00604321, 0x00604324),
-					List.of(),
-					Set.of(TraceBreakpointKind.WRITE), true, "ram:00604321");
+				TraceBreakpointLocation locCx =
+					bm.placeBreakpoint("Breakpoints[1]", snap, tb1.addr(0x00401234), List.of(),
+						Set.of(TraceBreakpointKind.SW_EXECUTE), true, "");
+				locCx.getSpecification()
+						.getObject()
+						.setAttribute(Lifespan.nowOn(snap), TraceBreakpointSpec.KEY_EXPRESSION,
+							"*0x00401234");
+				TraceBreakpointLocation locWr =
+					bm.placeBreakpoint("Breakpoints[2]", snap, tb1.range(0x00604321, 0x00604324),
+						List.of(), Set.of(TraceBreakpointKind.WRITE), true, "");
+				locWr.getSpecification()
+						.getObject()
+						.setAttribute(Lifespan.nowOn(snap), TraceBreakpointSpec.KEY_EXPRESSION,
+							"version");
 			}
 
 			try (Transaction tx = tb2.startTransaction()) {
@@ -164,8 +173,13 @@ public void testCaptureDebuggerBreakpointsPlugin() throws Throwable {
 				long snap = tb2.trace.getTimeManager().createSnapshot("First").getKey();
 
 				DBTraceBreakpointManager bm = tb2.trace.getBreakpointManager();
-				bm.placeBreakpoint("Breakpoints[1]", snap, tb2.addr(0x7fac1234), List.of(),
-					Set.of(TraceBreakpointKind.SW_EXECUTE), false, "ram:7fac1234");
+				TraceBreakpointLocation locCx =
+					bm.placeBreakpoint("Breakpoints[1]", snap, tb2.addr(0x7fac1234), List.of(),
+						Set.of(TraceBreakpointKind.SW_EXECUTE), false, "");
+				locCx.getSpecification()
+				.getObject()
+				.setAttribute(Lifespan.nowOn(snap), TraceBreakpointSpec.KEY_EXPRESSION,
+					"*0x7fac1234");
 			}
 
 			programManager.openProgram(program);
diff --git a/Ghidra/Test/DebuggerIntegrationTest/src/screen/java/ghidraclass/debugger/screenshot/TutorialDebuggerScreenShots.java b/Ghidra/Test/DebuggerIntegrationTest/src/screen/java/ghidraclass/debugger/screenshot/TutorialDebuggerScreenShots.java
index 18e61664c6e..44453241a13 100644
--- a/Ghidra/Test/DebuggerIntegrationTest/src/screen/java/ghidraclass/debugger/screenshot/TutorialDebuggerScreenShots.java
+++ b/Ghidra/Test/DebuggerIntegrationTest/src/screen/java/ghidraclass/debugger/screenshot/TutorialDebuggerScreenShots.java
@@ -260,6 +260,7 @@ public void testGettingStarted_Termmines() throws Throwable {
 
 	@Test
 	public void testGettingStarted_ToolWSpecimen() {
+		tool.getActiveWindow().requestFocus();
 		captureToolWindow(1920, 1080);
 	}
 
@@ -309,7 +310,7 @@ protected LaunchResult launchProgramInGdb() throws Throwable {
 	public void testGettingStarted_DisassemblyAfterLaunch() throws Throwable {
 		launchProgramInGdb();
 
-		Thread.sleep(7000);
+		tool.getActiveWindow().requestFocus();
 		captureToolWindow(1920, 1080);
 	}
 
@@ -382,9 +383,9 @@ protected Program importModule(TraceModule module) throws Throwable {
 		Program prog = null;
 		long snap = flatDbg.getCurrentSnap();
 		try (LoadResults<Program> result = ProgramLoader.builder()
-					.source(new File(module.getName(snap)))
-					.project(env.getProject())
-					.monitor(monitor)
+				.source(new File(module.getName(snap)))
+				.project(env.getProject())
+				.monitor(monitor)
 				.load()) {
 
 			result.save(monitor);
@@ -442,6 +443,7 @@ public void testBreakpoints_SyncedAfterImportLibC() throws Throwable {
 		// Just to be sure.
 		goTo(tool, progLibC, flatDbg.translateDynamicToStatic(dynAddr));
 
+		tool.getActiveWindow().requestFocus();
 		captureToolWindow(1920, 1080);
 	}
 
diff --git a/GhidraDocs/GhidraClass/Debugger/A3-Breakpoints.html b/GhidraDocs/GhidraClass/Debugger/A3-Breakpoints.html
index 8d514d35c70..1732b21481b 100644
--- a/GhidraDocs/GhidraClass/Debugger/A3-Breakpoints.html
+++ b/GhidraDocs/GhidraClass/Debugger/A3-Breakpoints.html
@@ -261,9 +261,9 @@ <h3>Set the Breakpoints</h3>
 <li>The <strong>Trace</strong> column indicates which target contains
 the location. The text here should match one of the tabs from the
 Dynamic Listing panel.</li>
-<li>The <strong>Comment</strong> column is a user-defined comment. Its
-default value is the specification that generated it, e.g.,
-<code>srand</code>.</li>
+<li>The <strong>Comment</strong> column is a user-defined comment.</li>
+<li>The <strong>Expression</strong> column is the expression given when
+specifying the breakpoint, e.g., <code>srand</code>.</li>
 </ul>
 </section>
 <section id="toggling-the-breakpoints" class="level3">
@@ -422,7 +422,7 @@ <h3>Locating the Mine Placement Algorithm</h3>
 </section>
 <section id="exercise-diagram-the-mines" class="level3">
 <h3>Exercise: Diagram the Mines</h3>
-<p>You goal is to capture the location of all the mines. You will
+<p>Your goal is to capture the location of all the mines. You will
 probably want to disable the breakpoints on <code>rand</code> and
 <code>srand</code> for now. Devise a strategy using breakpoints and the
 control buttons (Step, Resume, etc.) so that you can observe the
diff --git a/GhidraDocs/GhidraClass/Debugger/A3-Breakpoints.md b/GhidraDocs/GhidraClass/Debugger/A3-Breakpoints.md
index a42cc52a02c..3e4149b7035 100644
--- a/GhidraDocs/GhidraClass/Debugger/A3-Breakpoints.md
+++ b/GhidraDocs/GhidraClass/Debugger/A3-Breakpoints.md
@@ -88,7 +88,7 @@ The State, Address, and Sleigh columns are the same as the top, but for the indi
 * The **Trace** column indicates which target contains the location.
   The text here should match one of the tabs from the Dynamic Listing panel.
 * The **Comment** column is a user-defined comment.
-  Its default value is the specification that generated it, e.g., `srand`.
+* The **Expression** column is the expression given when specifying the breakpoint, e.g., `srand`.
 
 ### Toggling the Breakpoints
 
@@ -195,7 +195,7 @@ The advantages of a dynamic session along side static analysis should become mor
 
 ### Exercise: Diagram the Mines
 
-You goal is to capture the location of all the mines.
+Your goal is to capture the location of all the mines.
 You will probably want to disable the breakpoints on `rand` and `srand` for now.
 Devise a strategy using breakpoints and the control buttons (Step, Resume, etc.) so that you can observe the location of each mine.
 Use pen and paper to draw a diagram of the board, and mark the location of each mine as you observe the algorithm placing it.
diff --git a/GhidraDocs/GhidraClass/Debugger/images/Breakpoints_EmptyAfterLaunch.png b/GhidraDocs/GhidraClass/Debugger/images/Breakpoints_EmptyAfterLaunch.png
index 3955c953446..f6a0e1bac21 100644
Binary files a/GhidraDocs/GhidraClass/Debugger/images/Breakpoints_EmptyAfterLaunch.png and b/GhidraDocs/GhidraClass/Debugger/images/Breakpoints_EmptyAfterLaunch.png differ
diff --git a/GhidraDocs/GhidraClass/Debugger/images/Breakpoints_PopAfterSRandRand.png b/GhidraDocs/GhidraClass/Debugger/images/Breakpoints_PopAfterSRandRand.png
index 26f01c8170b..7efe94e1d60 100644
Binary files a/GhidraDocs/GhidraClass/Debugger/images/Breakpoints_PopAfterSRandRand.png and b/GhidraDocs/GhidraClass/Debugger/images/Breakpoints_PopAfterSRandRand.png differ
diff --git a/GhidraDocs/GhidraClass/Debugger/images/Breakpoints_SyncedAfterImportLibC.png b/GhidraDocs/GhidraClass/Debugger/images/Breakpoints_SyncedAfterImportLibC.png
index 856c2a4e5e7..45a4123f2b6 100644
Binary files a/GhidraDocs/GhidraClass/Debugger/images/Breakpoints_SyncedAfterImportLibC.png and b/GhidraDocs/GhidraClass/Debugger/images/Breakpoints_SyncedAfterImportLibC.png differ
diff --git a/GhidraDocs/GhidraClass/Debugger/images/GettingStarted_DisassemblyAfterLaunch.png b/GhidraDocs/GhidraClass/Debugger/images/GettingStarted_DisassemblyAfterLaunch.png
index 252c733b3e3..6c754929910 100644
Binary files a/GhidraDocs/GhidraClass/Debugger/images/GettingStarted_DisassemblyAfterLaunch.png and b/GhidraDocs/GhidraClass/Debugger/images/GettingStarted_DisassemblyAfterLaunch.png differ
diff --git a/GhidraDocs/GhidraClass/Debugger/images/GettingStarted_ToolWSpecimen.png b/GhidraDocs/GhidraClass/Debugger/images/GettingStarted_ToolWSpecimen.png
index a5482ea5f6a..8f59dccc5ff 100644
Binary files a/GhidraDocs/GhidraClass/Debugger/images/GettingStarted_ToolWSpecimen.png and b/GhidraDocs/GhidraClass/Debugger/images/GettingStarted_ToolWSpecimen.png differ
```
-----------------------------------
